 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gidatech - Intelligent Automation & Ecosystem Architecture for Luxury Living.">
    <title>Gidatech | Intelligent Automation</title>
    
    <!-- PRECONNECT FOR FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@200;300;400;500&family=Manrope:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE SETTINGS --- */
        :root {
            /* ============================================= */
            /* REFINED LUXURY PALETTE - PROFESSIONAL GRADE  */
            /* ============================================= */
            
            /* FOUNDATION COLORS */
            --c-black: #0A0A0A;           
            --c-pure-black: #000000;       
            --c-white: #FAFAFA;            
            --c-pure-white: #FFFFFF;       
            
            /* GOLD SPECTRUM */
            --c-gold: #C9A962;             
            --c-gold-light: #D4BA7A;       
            --c-gold-dim: #8A7445;         
            --c-gold-deep: #6B5A38;        
            
            /* GREEN SPECTRUM */
            --c-green: #0D5C43;            
            --c-green-light: #14785A;      
            --c-green-dark: #063D2C;       
            --c-green-muted: #0A4A36;      
            
            /* CREAM SPECTRUM */
            --c-cream: #F5EDE0;            
            --c-cream-light: #FAF7F2;      
            --c-cream-dark: #E8DDD0;       
            --c-cream-muted: #DED4C5;      
            
            /* NEUTRAL GRAYS */
            --c-gray-100: #F5F5F4;         
            --c-gray-200: #E5E5E3;
            --c-gray-300: #D4D4D2;
            --c-gray-400: #A3A3A1;         
            --c-gray-500: #737371;
            --c-gray-600: #525251;
            --c-gray-700: #3D3D3C;
            --c-gray-800: #262625;
            --c-gray-900: #171716;         
            
            /* ============================================= */
            /* DARK MODE THEME MAPPING (DEFAULT)            */
            /* ============================================= */
            
            --bg-body: var(--c-black); 
            --bg-body-secondary: #0D0D0D;
            --bg-card: #111111;
            --bg-card-hover: #161616;
            
            --text-main: var(--c-white);
            --text-muted: #9A9A98;         
            --text-subtle: #6B6B69;        
            --text-inverse: var(--c-black);
            
            /* ACCENTS */
            --accent-gold: var(--c-gold);
            --accent-gold-hover: var(--c-gold-light);
            --accent-gold-dim: var(--c-gold-dim);
            
            /* BRANDING */
            --whatsapp-green: var(--c-green);
            --whatsapp-green-hover: var(--c-green-light);
            
            /* SPECIFIC SECTION COLORS (Cream sections) */
            --light-bg: var(--c-cream); 
            --light-bg-secondary: var(--c-cream-dark);
            --light-text: var(--c-green);
            --light-text-muted: #2D5C4A;   
            --light-accent: var(--c-gold-dim);
            
            /* OVERLAYS */
            --overlay-color: rgba(10, 10, 10, 0.75);
            --overlay-gradient-start: rgba(10, 10, 10, 0.92);
            --overlay-gradient-mid: rgba(10, 10, 10, 0.6);
            
            /* GLASS EFFECTS */
            --glass-border: rgba(255, 255, 255, 0.15); /* Increased visibility */
            --glass-border-hover: rgba(255, 255, 255, 0.3);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-bg-hover: rgba(255, 255, 255, 0.08);
            
            /* SHADOWS */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 8px 30px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.5);
            --shadow-gold: 0 0 20px rgba(201, 169, 98, 0.15);
        }

        /* --- AUTOMATIC LIGHT MODE OVERRIDES --- */
        @media (prefers-color-scheme: light) {
            :root {
                /* Light Mode - Cream/White based with Green Typography */
                --bg-body: var(--c-pure-white);
                --bg-body-secondary: var(--c-cream-light);
                --bg-card: var(--c-cream);
                --bg-card-hover: var(--c-cream-dark);
                
                --text-main: var(--c-green);
                --text-muted: #4A6B5E;
                --text-subtle: #7A9189;
                --text-inverse: var(--c-pure-white);

                --accent-gold: var(--c-gold-dim);
                --accent-gold-hover: var(--c-gold);
                --accent-gold-dim: var(--c-gold-deep);

                --overlay-color: rgba(10, 10, 10, 0.75);
				--overlay-gradient-start: rgba(10, 10, 10, 0.92);
				--overlay-gradient-mid: rgba(10, 10, 10, 0.6);
                
                /* Darker borders for light mode visibility */
                --glass-border: rgba(13, 92, 67, 0.2); 
                --glass-border-hover: rgba(13, 92, 67, 0.4);
                --glass-bg: rgba(13, 92, 67, 0.04);
                --glass-bg-hover: rgba(13, 92, 67, 0.08);
                
                --shadow-sm: 0 2px 8px rgba(13, 92, 67, 0.08);
                --shadow-md: 0 8px 30px rgba(13, 92, 67, 0.12);
                --shadow-lg: 0 20px 60px rgba(13, 92, 67, 0.15);
                --shadow-gold: 0 0 20px rgba(138, 116, 69, 0.2);
            }
        }

        /* RESET & BASE */
        *, *::before, *::after { box-sizing: border-box; }
        
        html.lenis, html.lenis body { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto !important; }
        .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
        .lenis.lenis-stopped { overflow: hidden; }
        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            margin: 0; padding: 0;
            cursor: none; 
            overflow-x: hidden;
            letter-spacing: -0.01em; 
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        a, button { text-decoration: none; color: inherit; cursor: none; outline: none; border: none; background: transparent; }
        ul { list-style: none; padding: 0; margin: 0; }
        img, video { max-width: 100%; display: block; }
        
        /* PRELOADER */
        #preloader {
            position: fixed; inset: 0; background: var(--c-pure-black); z-index: 10000;
            display: flex; align-items: center; justify-content: center;
        }
        .preloader-logo {
            font-family: 'Manrope', sans-serif; font-weight: 300; letter-spacing: 0.2em;
            color: var(--c-gold); font-size: 1.2rem; overflow: hidden;
        }
        /* NOISE OVERLAY */
        .noise-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9000; opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        /* TYPOGRAPHY POLISH */
        .serif { font-family: 'Playfair Display', serif; }
        .font-light { font-weight: 300; }
        
        .micro-label {
            font-family: 'Manrope', sans-serif;
            font-size: 0.65rem; 
            text-transform: uppercase; 
            letter-spacing: 0.25em; 
            color: var(--accent-gold); 
            display: block; 
            margin-bottom: 1.5rem;
            opacity: 0.95;
        }
        .section-title {
            font-family: 'Playfair Display', serif; 
            font-size: clamp(2.8rem, 5vw, 4.5rem);
            line-height: 1.2; 
            color: var(--text-main); 
            margin-bottom: 2rem;
            font-weight: 400;
        }
        
        .section-title i { font-weight: 400; font-family: 'Playfair Display', serif; color: var(--accent-gold); }
        .text-body { 
            color: var(--text-muted); 
            line-height: 2.0;
            font-size: 1.05rem; 
            font-weight: 300; 
            max-width: 500px;
        }
        /* TEXT REVEAL CLASSES */
        .char-reveal-wrapper { overflow: hidden; display: block; }
        .char-reveal { display: block; transform: translateY(110%); will-change: transform; transition: transform 0.1s; }
        /* CUSTOM CURSOR */
        .cursor-dot {
            position: fixed; top: 0; left: 0; width: 6px; height: 6px; 
            background: var(--accent-gold); border-radius: 50%; z-index: 9999; pointer-events: none;
            transform: translate(-50%, -50%);
            box-shadow: var(--shadow-gold);
        }
        .cursor-circle { 
            position: fixed; top: 0; left: 0; width: 40px; height: 40px; 
            border: 1px solid var(--glass-border); border-radius: 50%; z-index: 9998; pointer-events: none;
            transition: width 0.3s cubic-bezier(0.19, 1, 0.22, 1), height 0.3s cubic-bezier(0.19, 1, 0.22, 1), background 0.3s, backdrop-filter 0.3s;
            transform: translate(-50%, -50%);
            display: flex; align-items: center; justify-content: center;
        }
        .cursor-text {
            font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0; color: var(--text-inverse); font-weight: 600;
        }
        body.hovering .cursor-circle { 
            width: 70px; height: 70px; 
            border-color: var(--glass-border-hover);
            background: var(--glass-bg); 
            backdrop-filter: blur(2px); 
        }
        body.drag-cursor .cursor-circle {
            width: 90px; height: 90px;
            background: var(--accent-gold);
            border-color: transparent;
        }
        body.drag-cursor .cursor-text { opacity: 1; }
        body.drag-cursor .cursor-dot { opacity: 0; }
        /* --- IMAGE UNIFICATION --- */
        img { 
            filter: sepia(0.08) contrast(1.03); 
            transition: transform 1.2s cubic-bezier(0.19, 1, 0.22, 1); 
        }
        /* --- BUTTON SYSTEM --- */
        .btn-glass {
            position: relative; 
            display: inline-flex; 
            align-items: center; 
            justify-content: space-between; 
            gap: 24px;
            padding: 6px 6px 6px 28px; 
            min-height: 42px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg); 
            backdrop-filter: blur(10px);
            color: var(--text-main); 
            text-transform: uppercase; 
            font-size: 0.7rem; 
            letter-spacing: 0.15em; 
            font-weight: 500;
            overflow: hidden; 
            transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            cursor: none;
        }
        .btn-glass.btn-dark { border-color: var(--text-main); background: rgba(0,0,0,0.03); color: var(--text-main); }
        .btn-glass.btn-dark .btn-circle { background: var(--text-main); color: var(--bg-body); }

        /* FIXED: Force White/Light buttons on dark backgrounds (Video/Images) regardless of Light Mode preference */
        .btn-glass.force-light-on-dark {
            border-color: rgba(255, 255, 255, 0.25) !important;
            color: #FFFFFF !important;
            background: rgba(255, 255, 255, 0.05) !important;
        }
        .btn-glass.force-light-on-dark .btn-circle {
            background: #FFFFFF !important;
            color: #000000 !important;
        }
        .btn-glass.force-light-on-dark:hover {
            border-color: #FFFFFF !important;
            background: rgba(255, 255, 255, 0.15) !important;
        }
        
        /* Interactive States for Button */
        .btn-glass:hover { 
            border-color: var(--accent-gold); 
            box-shadow: var(--shadow-gold);
            background: var(--glass-bg-hover);
        }
        .btn-glass.btn-dark:hover { border-color: var(--accent-gold); background: rgba(0,0,0,0.05); }
        
        .btn-pill { border-radius: 50px; }
        .btn-rect { border-radius: 12px; }
        .btn-circle {
            width: 40px; height: 40px; border-radius: 50%; 
            background: var(--text-main); 
            display: flex; align-items: center; justify-content: center;
            color: var(--bg-body); flex-shrink: 0;
            transition: transform 0.4s ease, background 0.4s ease, color 0.4s ease;
        }
        .btn-reverse { padding: 6px 28px 6px 6px; flex-direction: row-reverse; }
        /* Specific Button Overrides */
        .hero .btn-glass.btn-pill { border-radius: 12px; }
        .hero .btn-circle { border-radius: 12px !important; }
        .works-section .btn-glass.btn-rect { border-radius: 50px; }
        .process-section .btn-glass.btn-rect { border-radius: 12px; }
        .process-section .btn-circle { border-radius: 12px !important; }
        
        .final-cta .btn-glass.btn-pill { 
            border-color: rgba(13, 92, 67, 0.25) !important; 
            background: rgba(13, 92, 67, 0.08) !important; 
        }
        .final-cta .btn-glass.btn-pill:hover { 
            border-color: rgba(13, 92, 67, 0.5) !important; 
            background: rgba(13, 92, 67, 0.12) !important;
            box-shadow: 0 0 30px rgba(13, 92, 67, 0.15);
        }
        .final-cta .btn-circle { background: var(--whatsapp-green) !important; color: var(--c-pure-white) !important; }
        
        .btn-menu-trigger { padding: 0; width: 52px; height: 52px; justify-content: center; gap: 0; border-radius: 12%; }
        
        /* --- MENU SLIDER STYLES (SLIDE FROM RIGHT) --- */
        .menu-overlay {
            position: fixed; 
            top: 0; 
            right: 0; 
            width: 420px;
            max-width: 85vw;
            height: 100vh;
            background: var(--bg-body);
            z-index: 9980; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start;
            align-items: flex-start;
            padding: 100px 50px 50px 50px;
            transform: translateX(100%);
            opacity: 1;
            visibility: hidden;
            pointer-events: none;
            box-shadow: -10px 0 60px rgba(0, 0, 0, 0.3);
            border-left: 1px solid var(--glass-border);
            transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1), visibility 0s 0.5s;
        }
        .menu-overlay.open {
            transform: translateX(0);
            visibility: visible;
            pointer-events: auto;
            transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1), visibility 0s 0s;
        }
        @media (prefers-color-scheme: light) {
            .menu-overlay { background: rgba(245, 237, 224, 0.99); } 
        }
        
        /* Close button at top of slider */
        .menu-close-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        .menu-close-btn:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
            background: var(--glass-bg-hover);
        }
        
        .menu-nav { text-align: left; margin-bottom: 40px; width: 100%; }
        .menu-link {
            display: block; font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 4vw, 3rem); color: var(--text-main); line-height: 1.3;
            overflow: hidden; margin-bottom: 15px; cursor: none;
        }
        .menu-link span { display: block; transform: translateX(50px); opacity: 0; transition: transform 0.4s ease, opacity 0.4s ease, color 0.3s; color: var(--text-muted); }
        .menu-overlay.open .menu-link span { transform: translateX(0); opacity: 1; }
        .menu-link:nth-child(1) span { transition-delay: 0.1s; }
        .menu-link:nth-child(2) span { transition-delay: 0.15s; }
        .menu-link:nth-child(3) span { transition-delay: 0.2s; }
        .menu-link:nth-child(4) span { transition-delay: 0.25s; }
        .menu-link:hover span { color: var(--accent-gold); }
        
        /* Menu CTA button (for mobile - moved from header) */
        .menu-cta-wrapper { 
            margin-top: 30px; 
            width: 100%;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
        }
        .menu-overlay.open .menu-cta-wrapper {
            opacity: 1;
            transform: translateY(0);
        }
        
        .social-row { display: flex; gap: 20px; margin-top: auto; overflow: hidden; padding-top: 40px; }
        .social-icon { 
            width: 45px; height: 45px; border: 1px solid var(--glass-border); border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; color: var(--text-main); 
            transition: all 0.3s; opacity: 0; transform: translateY(20px);
        }
        .menu-overlay.open .social-icon { opacity: 1; transform: translateY(0); }
        .menu-overlay.open .social-icon:nth-child(1) { transition-delay: 0.35s; }
        .menu-overlay.open .social-icon:nth-child(2) { transition-delay: 0.4s; }
        .social-icon:hover { 
            border-color: var(--accent-gold); 
            color: var(--accent-gold); 
            box-shadow: var(--shadow-gold);
        }
        
        /* Backdrop overlay when menu is open */
        .menu-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9979;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.4s ease, visibility 0s 0.4s;
        }
        .menu-backdrop.open {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transition: opacity 0.4s ease, visibility 0s 0s;
        }
        
        /* Hide header CTA on mobile/tablet */
        @media (max-width: 768px) {
            .header-cta-btn { display: none !important; }
        }
        /* --- MAIN CONTENT WRAPPER FOR FOOTER REVEAL --- */
        main {
            position: relative;
            z-index: 2;
            background-color: var(--bg-body);
            width: 100%;
            margin-bottom: 0;
            box-shadow: var(--shadow-lg);
        }
      /* --- SHARED SERVICE PAGE STYLES --- */
.service-nav-bar {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    z-index: 50;
    padding: 30px 5%; 
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    background: linear-gradient(to bottom, rgba(15, 15, 15, 0.9) 0%, transparent 100%);
    pointer-events: none;
    transition: background 0.3s ease;
}

/* Make nav bar background more solid when scrolled */
.service-nav-bar.scrolled {
    background: linear-gradient(to bottom, rgba(15, 15, 15, 0.98) 0%, rgba(15, 15, 15, 0.95) 100%);
}

.service-nav-bar > * { 
    pointer-events: auto; 
}

.btn-close-service {
    display: flex; 
    align-items: center; 
    gap: 10px; 
    color: var(--text-main); 
    font-family: 'Manrope', sans-serif; 
    font-size: 0.8rem; 
    letter-spacing: 0.1em; 
    text-transform: uppercase;
    background: var(--glass-bg); 
    padding: 8px 16px; 
    border-radius: 50px; 
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.btn-close-service:hover { 
    background: var(--glass-bg-hover); 
    transform: translateY(-1px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.service-hero {
    position: relative; 
    min-height: 85vh; 
    width: 100%; 
    overflow: hidden; 
    background: var(--c-pure-black); 
    display: flex; 
    align-items: center; 
    justify-content: center;
    text-align: center; 
    padding: 120px 5% 80px;
}

.service-hero-image-wrapper { 
    position: absolute; 
    inset: 0; 
    width: 100%; 
    height: 100%; 
    overflow: hidden; 
} 

.service-hero-image {
    position: absolute; 
    inset: 0; 
    width: 100%; 
    height: 120%; 
    object-fit: cover; 
    opacity: 0.5; 
    filter: contrast(1.1) brightness(0.9) saturate(0.8);
    top: -10%;
    animation: slowZoom 20s ease-in-out infinite alternate;
}

/* Add subtle animation for hero image */
@keyframes slowZoom {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
}

/* FIXED: Service hero overlay - Always dark regardless of color scheme for professional appearance */
.service-hero-overlay {
    position: absolute; 
    inset: 0; 
    z-index: 1;
    background: linear-gradient(
        to bottom,  
        rgba(10, 10, 10, 0.88) 0%, 
        rgba(10, 10, 10, 0.78) 30%, 
        rgba(10, 10, 10, 0.88) 70%, 
        rgba(10, 10, 10, 0.95) 100%
    ) !important;
    mix-blend-mode: normal;
}

/* Add secondary overlay for depth */
.service-hero-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
        ellipse at center,
        transparent 30%,
        rgba(0, 0, 0, 0.7) 100%
    );
    pointer-events: none;
}

.service-hero-content { 
    position: relative; 
    z-index: 2; 
    max-width: 900px; 
    padding: 0 20px; 
}

.service-hero-content .micro-label { 
    color: var(--accent-gold); 
    opacity: 0.95; 
    margin-bottom: 1.5rem;
    display: block;
}

.service-hero-title {
    font-family: 'Playfair Display', serif; 
    font-size: clamp(3.5rem, 6vw, 5.5rem); 
    line-height: 1.05; 
    margin-bottom: 1.5rem; 
    font-weight: 400; 
    color: var(--c-pure-white);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.service-hero-subtitle { 
    font-size: 1.2rem; 
    color: var(--c-gray-300); 
    max-width: 700px; 
    margin: 0 auto; 
    font-weight: 300; 
    line-height: 1.6;
    opacity: 0.9;
}
        /* LIGHTING LAYOUT */
        .service-grid-section { padding: 120px 5%; background: var(--bg-body); }
        .service-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 400px 500px;
            gap: 20px; max-width: 1600px; margin: 0 auto;
        }
        .grid-card {
            position: relative; overflow: hidden; background: var(--bg-card);
            border-radius: 4px; border: 1px solid var(--glass-border);
            display: flex; flex-direction: column;
            transition: border-color 0.4s ease;
        }
        .grid-card:hover { border-color: var(--glass-border-hover); }
        .grid-card.img-card { clip-path: inset(0); }
        .grid-card.img-card img {
            width: 100%; height: 100%; object-fit: cover;
            transform-origin: center center; will-change: transform;
        }
        
        .grid-card-content {
            position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end;
            padding: 40px; background: linear-gradient(to top, var(--overlay-gradient-start) 0%, transparent 70%); z-index: 2;
        }
        .grid-card-title { font-family: 'Playfair Display', serif; font-size: 2.2rem; color: var(--c-pure-white); margin-bottom: 15px; line-height: 1.1; }
        .grid-card-text { color: var(--c-gray-300); font-size: 0.95rem; line-height: 1.6; }
        .grid-card.text-only { padding: 40px; justify-content: center; }
        .grid-card.text-only .desc-subtitle { font-size: 1.3rem; line-height: 1.5; color: var(--text-muted); margin-bottom: 30px; }
        .grid-card.detail-box { display: flex; flex-direction: row; }
        .detail-img { width: 50%; height: 100%; object-fit: cover; }
        /* ZIGZAG SECTION */
        .zigzag-section { padding: 120px 5%; background: linear-gradient(to bottom, var(--bg-body), var(--bg-body-secondary)); }
        .zz-row { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: center; max-width: 1300px; margin: 0 auto 140px; }
        .zz-row.reverse { direction: rtl; }
        .zz-row.reverse > * { direction: ltr; }
        .zz-content h2 { font-family: 'Playfair Display', serif; font-size: 3rem; margin-bottom: 1.5rem; line-height: 1.1; color: var(--text-main); }
        .zz-content p { color: var(--text-muted); font-size: 1.05rem; margin-bottom: 2rem; max-width: 450px; line-height: 1.8; }
        .zz-image { border-radius: 4px; overflow: hidden; box-shadow: var(--shadow-md); height: 400px; position: relative; }
        .zz-image img { width: 100%; height: 120%; top: -10%; position: absolute; object-fit: cover; filter: contrast(1.03); }
        /* PRODUCTS SECTION */
        .products-section { padding: 120px 5%; background: var(--bg-body-secondary); }
        .products-header { text-align: center; max-width: 800px; margin: 0 auto 80px; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; max-width: 1400px; margin: 0 auto; }
        .product-card {
            position: relative; overflow: hidden; border: 1px solid var(--glass-border);
            transition: all 0.4s ease; background: var(--bg-card); border-radius: 4px;
        }
        .product-card:hover { 
            border-color: var(--accent-gold-dim); 
            transform: translateY(-8px); 
            box-shadow: var(--shadow-md);
        }
        .product-image { width: 100%; height: 200px; object-fit: cover; transition: transform 0.6s ease; }
        .product-card:hover .product-image { transform: scale(1.05); }
        .product-info { padding: 25px; }
        .product-name { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--text-main); margin-bottom: 10px; }
        .product-note { color: var(--text-muted); font-size: 0.9rem; line-height: 1.6; }
        /* USP & CTA */
        .usp-section {
            min-height: 80vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 100px 5%; background: var(--bg-body);
        }
        .usp-content { max-width: 700px; margin-bottom: 60px; }
        .usp-content h2 { font-family: 'Playfair Display', serif; font-size: 3.5rem; margin-bottom: 1.5rem; line-height: 1.1; color: var(--text-main); }
        .usp-showcase { max-width: 400px; margin: 0 auto; border-radius: 4px; overflow: hidden; opacity: 0.85; }
        .discover-section {
            padding: 100px 5%; display: flex; flex-direction: column; align-items: center;
            background: var(--bg-body); border-top: 1px solid var(--glass-border);
        }
        .discover-line { width: 1px; height: 60px; background: var(--c-gray-700); margin-bottom: 40px; }
        .discover-title { font-family: 'Manrope', sans-serif; font-weight: 700; font-size: clamp(1.8rem, 4vw, 3rem); color: var(--text-main); margin-bottom: 40px; }
        .discover-nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; font-size: 1rem; font-weight: 300; }
        .nav-link { 
            color: var(--accent-gold); 
            transition: color 0.3s ease, text-shadow 0.3s ease; 
            padding: 0 10px; 
        }
        .nav-link:hover { 
            color: var(--accent-gold-hover); 
            text-shadow: var(--shadow-gold);
        }
        .service-cta { padding: 100px 5%; background: var(--bg-body); text-align: center; }
        .service-cta-content { max-width: 800px; margin: 0 auto; }
        .service-cta-title { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 4vw, 3.5rem); color: var(--text-main); margin-bottom: 1.5rem; line-height: 1.1; }
        .service-cta-text { color: var(--text-muted); margin-bottom: 40px; font-size: 1.1rem; }
        /* AUDIO LAYOUT */
        .audio-hero { position: relative; min-height: 100vh; width: 100%; overflow: hidden; background: var(--c-pure-black); display: flex; align-items: center; justify-content: center; }
        .audio-hero-image { position: absolute; inset: 0; width: 100%; height: 120%; top: -10%; object-fit: cover; opacity: 0.4; filter: contrast(1.1) saturate(0.8); }
        .audio-hero-overlay { position: absolute; inset: 0;  background: linear-gradient(
        to bottom,  
        rgba(10, 10, 10, 0.88) 0%, 
        rgba(10, 10, 10, 0.78) 30%, 
        rgba(10, 10, 10, 0.88) 70%, 
        rgba(10, 10, 10, 0.95) 100%
    ) !important; }
        .waveform-line { position: absolute; bottom: 20%; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--accent-gold), transparent); opacity: 0.25; }
        .audio-hero-content { position: relative; z-index: 2; text-align: center; max-width: 900px; padding: 0 20px; }
        .audio-hero-title { font-family: 'Playfair Display', serif; font-size: clamp(4rem, 8vw, 7rem); line-height: 0.95; color: var(--c-pure-white); margin-bottom: 1.5rem; }
        .audio-hero-subtitle { font-size: 1.3rem; color: var(--c-gray-300); max-width: 600px; margin: 0 auto; }
        
        .audio-gallery-section { 
            padding: 120px 0; 
            background: var(--bg-body); 
            overflow: hidden; 
        }
        .audio-gallery-header { text-align: center; padding: 0 5%; margin-bottom: 60px; }
        .audio-gallery-scroll { 
            display: flex; 
            gap: 30px; 
            padding: 0 5%; 
            overflow-x: auto; 
            cursor: grab;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .audio-gallery-scroll::-webkit-scrollbar { display: none; }
        .audio-gallery-item { 
            flex: 0 0 auto;
            width: min(70vw, 500px);
            height: 400px; 
            border-radius: 4px; 
            overflow: hidden; 
            position: relative;
            border: 1px solid var(--glass-border);
            transition: border-color 0.4s ease;
        }
        .audio-gallery-item:hover { border-color: var(--glass-border-hover); }
        .audio-gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
        .audio-gallery-item:hover img { transform: scale(1.05); }
        .audio-gallery-caption { position: absolute; bottom: 0; left: 0; right: 0; padding: 30px; background: linear-gradient(to top, var(--overlay-gradient-start), transparent); }
        .audio-gallery-caption h3 { font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--c-pure-white); margin-bottom: 8px; }
        .audio-gallery-caption p { color: var(--c-gray-200); font-size: 0.9rem; }
        .audio-statement { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; padding: 160px 5%; background: var(--bg-body-secondary); max-width: 1400px; margin: 0 auto; align-items: center; }
        .audio-statement-text h2 { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 4vw, 3.5rem); color: var(--text-main); margin-bottom: 1.5rem; line-height: 1.1; }
        .audio-statement-text p { color: var(--text-muted); font-size: 1.1rem; line-height: 1.8; }
        .audio-statement-visual { border-radius: 4px; overflow: hidden; box-shadow: var(--shadow-md); }
        .audio-statement-visual img { width: 100%; height: auto; }
        .audio-specs { padding: 120px 5%; background: var(--bg-body); }
        .audio-specs-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; max-width: 900px; margin: 60px auto 0; text-align: center; }
        .audio-spec-number { font-family: 'Playfair Display', serif; font-size: 4rem; color: var(--accent-gold); line-height: 1; margin-bottom: 15px; }
        .audio-spec-label { font-family: 'Manrope', sans-serif; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--text-muted); }
        /* SECURITY LAYOUT */
        .security-hero { position: relative; min-height: 90vh; width: 100%; overflow: hidden; background: var(--c-pure-black); display: flex; align-items: center; justify-content: center; }
        .security-hero-image { position: absolute; inset: 0; width: 100%; height: 120%; top: -10%; object-fit: cover; opacity: 0.4; filter: contrast(1.2) saturate(0) sepia(0.08); }
        .security-hero-overlay { position: absolute; inset: 0; background: radial-gradient(ellipse at center, transparent 0%, rgba(10, 10, 10, 0.88) 70%, rgba(10, 10, 10, 0.95) 100%  )!important;} 
        .security-crosshair { position: absolute; top: 50%; left: 50%; width: 150px; height: 150px; border: 1px solid rgba(201, 169, 98, 0.25); border-radius: 50%; transform: translate(-50%, -50%); }
        .security-crosshair::before, .security-crosshair::after { content: ''; position: absolute; background: rgba(201, 169, 98, 0.25); }
        .security-crosshair::before { width: 1px; height: 30px; top: -40px; left: 50%; transform: translateX(-50%); }
        .security-crosshair::after { width: 30px; height: 1px; left: -40px; top: 50%; transform: translateY(-50%); }
        .security-hero-content { position: relative; z-index: 2; text-align: center; max-width: 800px; padding: 0 20px; }
        .security-hero-title { font-family: 'Playfair Display', serif; font-size: clamp(3.5rem, 7vw, 6rem); color: var(--c-pure-white); margin-bottom: 1.5rem; line-height: 1; }
        .security-hero-subtitle { font-size: 1.2rem; color: var(--c-gray-300); }
        .security-quad { padding: 120px 5%; background: var(--bg-body); }
        .security-quad-header { text-align: center; margin-bottom: 60px; }
        .security-quad-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .security-quad-item { 
            position: relative; height: 350px; overflow: hidden; border-radius: 4px; border: 1px solid var(--glass-border);
            transition: border-color 0.4s ease;
        }
        .security-quad-item:hover { border-color: var(--glass-border-hover); }
        .security-quad-item img { width: 100%; height: 100%; object-fit: cover; filter: saturate(0.3) contrast(1.1); transition: all 0.6s ease; }
        .security-quad-item:hover img { filter: saturate(1) contrast(1.03); transform: scale(1.05); }
        .security-quad-label { position: absolute; top: 20px; left: 20px; font-family: 'Manrope', sans-serif; font-size: 0.65rem; letter-spacing: 0.15em; color: var(--accent-gold); text-transform: uppercase; background: rgba(0,0,0,0.6); padding: 6px 12px; border-radius: 4px; }
        .security-quad-status { position: absolute; top: 20px; right: 20px; width: 8px; height: 8px; background: var(--whatsapp-green); border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .security-quad-info { position: absolute; bottom: 0; left: 0; right: 0; padding: 30px; background: linear-gradient(to top, var(--overlay-gradient-start), transparent); }
        .security-quad-info h4 { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--c-pure-white); margin-bottom: 5px; }
        .security-quad-info p { color: var(--c-gray-200); font-size: 0.85rem; }
        .security-focus { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; padding: 160px 5%; background: var(--bg-body-secondary); align-items: center; }
        .security-focus-content h2 { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 4vw, 3.5rem); color: var(--text-main); margin-bottom: 1.5rem; line-height: 1.1; }
        .security-focus-content p { color: var(--text-muted); font-size: 1.1rem; line-height: 1.8; max-width: 450px; }
        .security-focus-image { border-radius: 4px; overflow: hidden; box-shadow: var(--shadow-md); }
        .security-focus-image img { width: 100%; height: auto; }
        .security-features { padding: 120px 5%; background: var(--bg-body); }
        .security-features-list { max-width: 800px; margin: 60px auto 0; }
        .security-feature-item { display: flex; gap: 40px; align-items: flex-start; padding: 40px 0; border-bottom: 1px solid var(--glass-border); }
        .security-feature-num { font-family: 'Playfair Display', serif; font-size: 2rem; color: var(--accent-gold-dim); line-height: 1; }
        .security-feature-text h4 { font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--text-main); margin-bottom: 10px; }
        .security-feature-text p { color: var(--text-muted); font-size: 1rem; line-height: 1.7; }
        /* SOLAR LAYOUT */
        .solar-hero { display: grid; grid-template-columns: 1fr 1fr; min-height: 90vh; }
        .solar-hero-left { display: flex; flex-direction: column; justify-content: center; padding: 100px 8%; background: var(--bg-body); }
        .solar-hero-title { font-family: 'Playfair Display', serif; font-size: clamp(3rem, 5vw, 4.5rem); color: var(--text-main); line-height: 1.05; margin-bottom: 1.5rem; }
        .solar-hero-subtitle { color: var(--text-muted); font-size: 1.2rem; line-height: 1.7; max-width: 400px; }
        .solar-hero-right { position: relative; overflow: hidden; }
        .solar-hero-right img { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.05); }
        .solar-gradient-divider {
            position: absolute; left: 0; top: 0; bottom: 0; width: 150px;
            background: linear-gradient(to right, var(--bg-body) 0%, transparent 100%); z-index: 1;
        }
        .solar-stats {
            background: var(--bg-body-secondary); padding: 60px 5%; display: flex; justify-content: center; gap: 80px;
            border-top: 1px solid var(--glass-border); border-bottom: 1px solid var(--glass-border);
        }
        .solar-stat { text-align: center; }
        .solar-stat-value { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--accent-gold); line-height: 1; margin-bottom: 10px; }
        .solar-stat-label { font-family: 'Manrope', sans-serif; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--text-muted); }
        .solar-dual { display: grid; grid-template-columns: 1fr 1fr; min-height: 80vh; }
        .solar-dual-panel { position: relative; display: flex; flex-direction: column; justify-content: center; padding: 100px 8%; }
        .solar-dual-panel.dark { background: var(--bg-body); }
        .solar-dual-panel.light { background: var(--light-bg); color: var(--light-text); }
        .solar-dual-panel.light .micro-label { color: var(--light-accent); }
        .solar-dual-panel h2 { font-family: 'Playfair Display', serif; font-size: clamp(2rem, 3vw, 3rem); line-height: 1.15; margin-bottom: 1.5rem; }
        .solar-dual-panel.dark h2 { color: var(--text-main); }
        .solar-dual-panel.light h2 { color: var(--light-text); }
        .solar-dual-panel p { font-size: 1.05rem; line-height: 1.8; max-width: 400px; }
        .solar-dual-panel.dark p { color: var(--text-muted); }
        .solar-dual-panel.light p { color: var(--light-text-muted); opacity: 0.9; }
        .solar-flow { padding: 160px 5%; background: var(--bg-body); text-align: center; }
        .solar-flow-header { max-width: 600px; margin: 0 auto 100px; }
        .solar-flow-header h2 { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 4vw, 3.5rem); color: var(--text-main); margin-bottom: 1.5rem; line-height: 1.1; }
        .solar-flow-header p { color: var(--text-muted); font-size: 1.1rem; line-height: 1.8; }
        .solar-flow-diagram { display: flex; align-items: center; justify-content: center; gap: 60px; flex-wrap: wrap; max-width: 1200px; margin: 0 auto; }
        .solar-flow-node { display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .solar-flow-icon {
            width: 100px; height: 100px; border: 1px solid var(--glass-border); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; transition: all 0.4s ease;
            color: var(--text-main);
        }
        .solar-flow-node:hover .solar-flow-icon { 
            border-color: var(--accent-gold); 
            background: rgba(201, 169, 98, 0.05);
            box-shadow: var(--shadow-gold);
        }
        .solar-flow-icon svg { width: 36px; height: 36px; stroke: var(--accent-gold); }
        .solar-flow-label { font-family: 'Manrope', sans-serif; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--text-muted); }
        .solar-flow-arrow { width: 60px; height: 2px; background: linear-gradient(90deg, var(--accent-gold-dim), var(--accent-gold)); position: relative; }
        .solar-flow-arrow::after {
            content: ''; position: absolute; right: 0; top: 50%; transform: translateY(-50%) rotate(45deg);
            width: 8px; height: 8px; border-top: 2px solid var(--accent-gold); border-right: 2px solid var(--accent-gold);
        }
        .solar-image-break { width: 100%; height: 60vh; position: relative; overflow: hidden; }
        .solar-image-break img { width: 100%; height: 130%; top: -15%; position: absolute; object-fit: cover; filter: contrast(1.03); }
        .solar-image-break-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, var(--bg-body) 0%, transparent 20%, transparent 80%, var(--bg-body) 100%); }
        /* --- HOME PAGE SECTIONS --- */
        .hero { position: relative; height: 100vh; width: 100%; overflow: hidden; background: var(--c-pure-black); }
        
        /* FIXED: Hero Video Mobile Bug - Force object-fit: cover */
        .hero-video { position: absolute; inset: 0; width: 100%; height: 120%; top: -10%; object-fit: cover; }
        
        .hero-ui { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; padding: 0 5% 5% 5%; }
        .hero-h1 { font-size: clamp(1.5rem, 3vw, 2.5rem); line-height: 1.2; margin-bottom: 2rem; font-family: 'Playfair Display'; letter-spacing: -0.03em; color: var(--c-pure-white); }
        
        .reveal-overflow { overflow: hidden; display: block; }
        .reveal-inner { display: block; transform: translateY(110%); will-change: transform; }
		 .line { width: 40px; height: 1px; background: var(--accent); }
        .works-section { padding: 140px 5%; background: var(--bg-body); }
        .works-intro { margin-bottom: 100px; padding-bottom: 40px; border-bottom: 1px solid var(--glass-border); }
        .project-card { 
            position: sticky; top: 10vh; height: 85vh; width: 100%; margin-bottom: 10vh; 
            border-radius: 4px; overflow: hidden; border: 1px solid var(--glass-border); 
            box-shadow: var(--shadow-lg); display: flex; align-items: flex-end;
            transition: border-color 0.4s ease;
        }
        .project-card:hover { border-color: var(--glass-border-hover); }
        .project-card img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }
        .card-details { 
            position: relative; z-index: 2; padding: 60px; width: 100%; 
            background: linear-gradient(to top, var(--overlay-gradient-start) 0%, var(--overlay-color) 50%, transparent 100%); 
            display: flex; justify-content: space-between; align-items: flex-end; 
        }
        .services-new-wrapper { background-color: var(--light-bg); padding: 160px 5%; color: var(--light-text); font-family: 'Manrope', sans-serif; position: relative; z-index: 10; }
        .services-container { max-width: 1400px; margin: 0 auto; }
        .service-row { display: flex; align-items: center; justify-content: space-between; gap: 80px; margin-bottom: 120px; opacity: 0; transform: translateY(30px); }
        .service-row:last-child { margin-bottom: 0; }
        .info-col { flex: 0 0 40%; display: flex; flex-direction: column; justify-content: center; }
        .num-tag { font-family: 'Manrope', sans-serif; font-size: 0.75rem; font-weight: 500; letter-spacing: 0.2em; text-transform: uppercase; color: var(--light-accent); margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        .num-tag::after { content: ''; height: 1px; width: 40px; background-color: var(--light-accent); opacity: 0.5; }
        .services-new-wrapper h2 { font-family: 'Playfair Display', serif; font-size: 2.8rem; line-height: 1.1; margin: 0 0 25px 0; color: var(--light-text); font-weight: 400; }
        .services-new-wrapper p { font-size: 1.1rem; line-height: 1.7; color: var(--light-text-muted); margin-bottom: 35px; max-width: 90%; font-weight: 300; }
        .visual-col { flex: 1; height: 450px; position: relative; overflow: hidden; }
        
        .img-mask { 
            width: 100%; height: 100%; overflow: hidden; position: relative; 
            box-shadow: var(--shadow-md); 
        }
        .img-mask img { 
            width: 100%; height: 100%; object-fit: cover; filter: sepia(0.08); 
            transform: scale(1.15);
            opacity: 0;
            transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.8s ease;
        }
        .img-mask.revealed img {
            transform: scale(1);
            opacity: 1;
        }
        
        .service-row:nth-child(odd) { flex-direction: row; }
        .service-row:nth-child(odd) .info-col { align-items: flex-start; text-align: left; }
        .service-row:nth-child(odd) .img-mask { border-top-right-radius: 200px; }
        .service-row:nth-child(even) { flex-direction: row-reverse; }
        .service-row:nth-child(even) .info-col { align-items: flex-end; text-align: right; }
        .service-row:nth-child(even) .num-tag { flex-direction: row-reverse; }
        .service-row:nth-child(even) .num-tag::after { order: -1; }
        .service-row:nth-child(even) .img-mask { border-top-left-radius: 200px; }
        
        /* FIXED: Process section styling - Professional sticky scroll implementation */
        .process-section { 
            padding: 140px 5%; 
            background: var(--light-bg); 
            color: var(--light-text); 
            position: relative;
            overflow: visible;
        }
        
        /* Section header stays above the two-column layout */
        .process-section > .micro-label,
        .process-section > .section-title {
            position: relative;
            z-index: 5;
        }
        
        .pin-wrapper { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 80px; 
            max-width: 1300px; 
            margin: 0 auto; 
            position: relative;
            align-items: start;
        }
        
        /* FIXED: Proper sticky positioning for the image column */
        .pin-image { 
            position: sticky; 
            top: 100px; /* Fixed position from top of viewport */
            height: auto;
            max-height: calc(100vh - 150px);
            border-radius: 4px; 
            overflow: hidden; 
            box-shadow: var(--shadow-md); 
            align-self: flex-start;
        }
        .pin-image img { 
            width: 100%; 
            aspect-ratio: 3/4; 
            object-fit: cover; 
        }
        
        /* Right column scrolls naturally */
        .scroll-content { 
            padding-top: 0; 
            position: relative;
        }
        .process-step { 
            opacity: 0.3; 
            transition: opacity 0.6s ease, border-color 0.6s ease; 
            margin-bottom: 40vh; /* Increased spacing for better sticky effect */
            padding-left: 40px; 
            border-left: 2px solid var(--glass-border); 
        }
        .process-step:last-of-type { margin-bottom: 15vh; }
        .process-step.active { opacity: 1; border-left-color: var(--light-text); }
        .step-idx { font-family: 'Manrope', sans-serif; font-size: 0.7rem; letter-spacing: 0.2em; color: var(--light-accent); }
        .maint-section { padding: 140px 5%; background: var(--bg-body); }
        .maint-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; max-width: 1200px; margin: 80px auto 0; }
        .maint-box { 
            background: var(--bg-card); padding: 50px; border: 1px solid var(--glass-border); border-radius: 4px; 
            transition: border-color 0.4s ease, box-shadow 0.4s ease; 
        }
        .maint-box:hover { 
            border-color: var(--accent-gold-dim);
            box-shadow: var(--shadow-gold);
        }
        .maint-icon { width: 40px; height: 40px; color: var(--accent-gold); margin-bottom: 30px; }
        .final-cta { position: relative; min-height: 70vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .cta-bg { position: absolute; inset: 0; }
        .cta-bg img { 
            width: 100%; height: 120%; top: -10%;
            object-fit: cover; 
        }
        .cta-content { position: relative; z-index: 2; text-align: center; padding: 5%; }
        /* FOOTER (FIXED BEHIND MAIN CONTENT) */
        footer { 
            background: var(--c-pure-black); padding: 80px 5%; color: var(--c-gray-500); font-size: 0.95rem;
            position: sticky; bottom: 0; left: 0; width: 100%; z-index: 1;
        }
        .footer-flex { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 60px; max-width: 1200px; margin: 0 auto; }
        /* =============================================== */
        /* ENHANCED RESPONSIVE - CREATIVE MOBILE VIEW */
        /* =============================================== */
        
        @media (max-width: 1024px) {
            /* Hide custom cursor on tablet/mobile */
            .cursor-dot, .cursor-circle { display: none; }
            body { cursor: auto; }
            a, button { cursor: pointer; }
            
            .service-row { 
                flex-direction: column !important; 
                gap: 40px;
            }
            .service-row:nth-child(even) .info-col,
            .service-row:nth-child(odd) .info-col { 
                align-items: center; 
                text-align: center; 
            }
            .service-row:nth-child(even) .num-tag,
            .service-row:nth-child(odd) .num-tag { 
                justify-content: center;
                flex-direction: row;
            }
            .visual-col { height: 350px; width: 100%; }
            .info-col { flex: 1; width: 100%; }
            
            /* FIXED: Process section mobile fix (disable sticky, fix layout) */
            .pin-wrapper { grid-template-columns: 1fr; gap: 40px; }
            .pin-image { 
                position: relative; top: 0; margin-bottom: 40px; width: 100%; height: auto; 
                box-shadow: none; align-self: auto;
            }
            .scroll-content { padding-top: 0; }
            .process-step { margin-bottom: 60px; opacity: 1; /* Force opacity on mobile */ }
            .process-step:last-of-type { margin-bottom: 40px; }
            
            .maint-grid { grid-template-columns: 1fr; }
            .footer-flex { grid-template-columns: 1fr; text-align: center; }
            .service-grid { grid-template-columns: 1fr 1fr; grid-template-rows: auto; }
            .zz-row { grid-template-columns: 1fr; gap: 40px; }
            .zz-row.reverse { direction: ltr; }
            
            .audio-statement { grid-template-columns: 1fr; gap: 60px; }
            .audio-specs-grid { grid-template-columns: 1fr; gap: 40px; }
            .audio-gallery-item { width: 80vw; height: 350px; }
            
            .security-quad-grid { grid-template-columns: 1fr; }
            .security-focus { grid-template-columns: 1fr; gap: 60px; }
            
            .solar-hero { grid-template-columns: 1fr; }
            .solar-hero-right { min-height: 50vh; }
            .solar-gradient-divider { display: none; }
            .solar-stats { flex-direction: column; gap: 40px; }
            .solar-dual { grid-template-columns: 1fr; }
            .solar-flow-diagram { flex-direction: column; gap: 40px; }
            .solar-flow-arrow { transform: rotate(90deg); }
        }
        
        @media (max-width: 768px) {
            /* Enhanced mobile experience */
            .hero-h1 { font-size: clamp(2rem, 8vw, 3rem); margin-bottom: 2rem; }
            .hero-ui { padding: 0 5% 8% 5%; }
            
            .section-title { font-size: clamp(2rem, 7vw, 3rem); }
            .micro-label { font-size: 0.6rem; margin-bottom: 1rem; }
            
            .works-section { padding: 100px 5%; }
            .works-intro { margin-bottom: 60px; }
            .project-card { height: 70vh; top: 5vh; margin-bottom: 5vh; }
            .card-details { 
                padding: 30px; 
                flex-direction: column; 
                align-items: flex-start; 
                gap: 20px;
            }
            .card-details h3 { font-size: 1.6rem !important; }
            
            .services-new-wrapper { padding: 100px 5%; }
            .services-new-wrapper h2 { font-size: 2rem; }
            .services-new-wrapper p { font-size: 1rem; }
            .service-row { margin-bottom: 80px; gap: 30px; }
            .visual-col { height: 280px; }
            .img-mask { border-radius: 20px !important; }
            .service-row:nth-child(odd) .img-mask,
            .service-row:nth-child(even) .img-mask { 
                border-top-left-radius: 20px !important;
                border-top-right-radius: 20px !important;
            }
            
            .process-section { padding: 100px 5%; }
            .process-step { padding-left: 25px; margin-bottom: 50px; }
            .process-step h3 { font-size: 1.5rem !important; }
            .process-step .text-body { font-size: 0.95rem; }
            
            .maint-section { padding: 100px 5%; }
            .maint-box { padding: 35px; }
            
            .final-cta { min-height: 60vh; }
            .cta-content h2 { font-size: 2.8rem !important; }
            
            .service-grid { grid-template-columns: 1fr; }
            .grid-card { min-height: 300px; }
            .grid-card-title { font-size: 1.6rem; }
            
            .audio-hero-title { font-size: clamp(2.5rem, 10vw, 4rem); }
            .audio-gallery-item { width: 85vw; height: 300px; }
            .audio-gallery-section { padding: 80px 0; }
            
            .security-hero-title { font-size: clamp(2.5rem, 8vw, 4rem); }
            .security-quad-item { height: 280px; }
            .security-feature-item { flex-direction: column; text-align: center; gap: 20px; }
            .security-feature-num { margin: 0 auto; }
            
            .solar-hero-left { padding: 80px 5%; }
            .solar-hero-title { font-size: clamp(2.5rem, 8vw, 3.5rem); }
            .solar-stat-value { font-size: 2.5rem; }
            .solar-dual-panel { padding: 60px 5%; }
            .solar-flow-icon { width: 80px; height: 80px; }
            
            .btn-glass { 
                font-size: 0.65rem; 
                padding: 5px 5px 5px 20px; 
                min-height: 48px;
                gap: 16px;
            }
            .btn-circle { width: 36px; height: 36px; }
            .btn-reverse { padding: 5px 20px 5px 5px; }
            
            /* Menu slider mobile adjustments */
            .menu-overlay { 
                width: 100%;
                max-width: 100vw;
                padding: 90px 30px 30px 30px;
            }
            .menu-close-btn { top: 25px; right: 25px; width: 46px; height: 46px; }
            .menu-link { font-size: clamp(1.8rem, 7vw, 2.5rem); margin-bottom: 10px; }
            .social-row { gap: 15px; padding-top: 30px; }
            .social-icon { width: 42px; height: 42px; }
            
            footer { padding: 60px 5%; }
            .footer-flex { gap: 40px; }
            
            .discover-section { padding: 60px 5%; }
            .discover-title { font-size: 1.5rem; }
            .discover-nav { gap: 8px; }
            .nav-link { font-size: 0.9rem; }
            
            .service-cta { padding: 80px 5%; }
            .service-cta-title { font-size: clamp(2rem, 6vw, 3rem); }
        }
        
        @media (max-width: 480px) {
            /* Extra small mobile refinements */
            .hero { height: 100svh; } /* Use small viewport height */
            .hero-h1 { font-size: clamp(1.8rem, 9vw, 2.5rem); }
            
            header { padding: 25px 4% !important; }
            .logo { font-size: 0.9rem !important; }
            .btn-menu-trigger { width: 46px; height: 46px; }
            
            .project-card { height: 65vh; }
            
            .visual-col { height: 240px; }
            .services-new-wrapper h2 { font-size: 1.8rem; }
            
            .grid-card { min-height: 260px; }
            .grid-card-content { padding: 25px; }
            .grid-card-title { font-size: 1.4rem; }
            
            .zz-content h2 { font-size: 2rem; }
            .zz-image { height: 300px; }
            
            .product-card { margin-bottom: 20px; }
            .product-info { padding: 20px; }
            .product-name { font-size: 1.1rem; }
            
            .usp-content h2 { font-size: 2.5rem; }
            
            .cta-content h2 { font-size: 2.2rem !important; }
            .cta-content .text-body { font-size: 0.95rem; }
            
            .audio-gallery-item { width: 90vw; height: 260px; }
            .audio-gallery-caption { padding: 20px; }
            .audio-gallery-caption h3 { font-size: 1.2rem; }
            
            .security-quad-item { height: 240px; }
            .security-quad-info { padding: 20px; }
            .security-quad-info h4 { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div id="preloader">
        <div class="preloader-logo">GIDATECH</div>
    </div>
    
    <div class="noise-overlay"></div>
    <div class="cursor-dot"></div>
    <div class="cursor-circle"><span class="cursor-text">DRAG</span></div>
    <!-- MENU BACKDROP (for closing when clicking outside) -->
    <div class="menu-backdrop" id="menuBackdrop"></div>
    
    <!-- MENU SLIDER (slides from right) -->
    <div class="menu-overlay" id="menuOverlay">
        <!-- Close button at top of slider -->
        <button class="menu-close-btn hover-target" id="menuCloseBtn" aria-label="Close menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>
        
        <nav class="menu-nav">
            <a href="#" class="menu-link hover-target" onclick="lenis.scrollTo('.works-section'); return false;"><span>Projects</span></a>
            <a href="#services" class="menu-link hover-target"><span>Services</span></a>
            <a href="#" class="menu-link hover-target" onclick="lenis.scrollTo('.process-section'); return false;"><span>Process</span></a>
            <a href="https://wa.me/1234567890" class="menu-link hover-target"><span>Contact</span></a>
        </nav>
        
        <!-- CTA Button inside menu for mobile -->
        <div class="menu-cta-wrapper">
            <a href="https://wa.me/1234567890" class="btn-glass btn-pill hover-target" style="width: 100%; justify-content: center;">
                <span>Let's Talk</span>
                <div class="btn-circle">
                    <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px; height:16px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                </div>
            </a>
        </div>
        
        <div class="social-row">
            <a href="#" class="social-icon hover-target"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
            <a href="#" class="social-icon hover-target"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a>
        </div>
    </div>
    <!-- WRAP CONTENT IN MAIN FOR FOOTER REVEAL EFFECT -->
    <main id="main-content">
        <!-- ========== SERVICE PAGE TEMPLATE ========== -->
        <div id="service-page" style="display: none;">
            <nav class="service-nav-bar">
                <a href="#" id="close-service-btn" class="btn-close-service hover-target">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    <span>Back</span>
                </a>
                <div class="logo font-light" style="letter-spacing:0.15em; font-size:1rem; color:var(--text-main);">GIDATECH</div>
            </nav>
            <!-- Dynamic content will be injected here by JS -->
            <div id="service-content"></div>
            <!-- Shared Footer Elements -->
            <section class="discover-section">
                <div class="discover-line"></div>
                <h3 class="discover-title">Explore More</h3>
                <nav class="discover-nav" id="discover-nav"></nav>
            </section>
            <section class="service-cta">
                <div class="service-cta-content">
                    <span class="micro-label">Start a Conversation</span>
                    <h2 class="service-cta-title">Ready to Begin?</h2>
                    <p class="service-cta-text" id="cta-text">Discuss your project with our specialists.</p>
                    <a id="whatsapp-cta" href="https://wa.me/1234567890" class="btn-glass btn-pill hover-target" style="border-color: rgba(13, 92, 67, 0.25); background: rgba(13, 92, 67, 0.06);">
                        <span>Chat on WhatsApp</span>
                        <div class="btn-circle" style="background: var(--whatsapp-green); color: var(--c-pure-white);">
                            <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px; height:16px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        </div>
                    </a>
                </div>
            </section>
        </div>
        <!-- ========== HOME PAGE ========== -->
        <div id="home-page">
            <!-- 1. HERO -->
            <section class="hero">
                <header style="position:absolute; top:0; width:100%; padding:40px 5%; display:flex; justify-content:space-between; align-items: center; z-index:10;">
                    <div class="logo font-light" style="letter-spacing:0.15em; font-size:1.1rem; font-weight: 500; color: var(--c-pure-white);">GIDATECH</div>
                    
                    <div style="display: flex; gap: 15px; align-items: center; color: var(--c-pure-white);">
                        <!-- FIXED: CTA Button hidden on mobile via header-cta-btn class -->
                        <a href="https://wa.me/1234567890" class="btn-glass btn-pill force-light-on-dark hover-target header-cta-btn">
                            <span>Contact Us</span>
                            <div class="btn-circle">
                                <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px; height:16px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                            </div>
                        </a>
                        <!-- Menu toggle button (hamburger) -->
                        <button class="btn-glass btn-menu-trigger force-light-on-dark hover-target" id="menuToggle" aria-label="Menu">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="pointer-events: none;">
                                <line x1="3" y1="9" x2="21" y2="9" />
                                <line x1="3" y1="15" x2="16" y2="15" />
                            </svg>
                        </button>
                    </div>
                </header>
                <video class="hero-video" autoplay muted loop playsinline>
                    <source src="hero.mp4" type="video/mp4">
                    <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?q=80&w=2000" alt="Luxury Home" style="width:100%; height:100%; object-fit:cover;">
                </video>
                <div class="hero-overlay"></div>
                <div class="hero-ui">
                    <div class="hero-header">
                        <span class="micro-label"><span class="reveal-overflow"><span class="reveal-inner"><div class="line"></div>Automated</span></span></span>
                        <h1 class="hero-h1">
                            <span class="reveal-overflow"><span class="reveal-inner">A home   </span></span>
                            <span class="reveal-overflow"><span class="reveal-inner"><i>that responds</i> to you.</span></span>
                        </h1>
                        <div class="reveal-overflow">
                            <div class="reveal-inner" style="transition-delay: 0.2s;">
                                <!-- FIXED: Main CTA uses 'force-light-on-dark' -->
                                <a href="#services" class="btn-glass btn-pill force-light-on-dark hover-target">
                                    <span>View how it works</span>
                                    <div class="btn-circle">
									<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<path d="M12 5v14M19 12l-7 7-7-7"/>
									</svg>
								</div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 2. SELECTED WORKS -->
            <section class="works-section">
                <div class="works-intro">
                    <span class="micro-label">Selected private residences</span>
                    <h2 class="section-title">Designed <br><i>to work quietly.</i></h2>
                </div>
                <div class="project-card hover-target">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2000" loading="lazy" alt="Jabi Lake">
                    <div class="card-details">
                        <div>
                            <h3 class="serif" style="font-size: 2.2rem; margin-bottom:15px; color:var(--c-pure-white);">Jabi Lake House</h3>
                            <p class="text-body" style="color:var(--c-gray-200);">Full shading automation & climate zoning.</p>
                        </div>
                        <a href="#" class="btn-glass btn-rect force-light-on-dark">
                            <span>View project</span>
                            <div class="btn-circle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="project-card hover-target">
                    <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=2000" loading="lazy" alt="Banana Island">
                    <div class="card-details">
                        <div>
                            <h3 class="serif" style="font-size: 2.2rem; margin-bottom:15px; color:var(--c-pure-white);">Banana Island Villa</h3>
                            <p class="text-body" style="color:var(--c-gray-200);">Audio and visuals integrated without altering the interior design.</p>
                        </div>
                        <a href="#" class="btn-glass btn-rect force-light-on-dark">
                            <span>View project</span>
                            <div class="btn-circle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </div>
                        </a>
                    </div>
                </div>
				<div class="project-card hover-target">
                    <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=2000" loading="lazy" alt="Banana Island">
                    <div class="card-details">
                        <div>
                            <h3 class="serif" style="font-size: 2.2rem; margin-bottom:15px; color:var(--c-pure-white);">Banana Island Villa</h3>
                            <p class="text-body" style="color:var(--c-gray-200);">Audio and visuals integrated without altering the interior design.</p>
                        </div>
                        <a href="#" class="btn-glass btn-rect force-light-on-dark">
                            <span>View project</span>
                            <div class="btn-circle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </div>
                        </a>
                    </div>
                </div>
				<div class="project-card hover-target">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2000" loading="lazy" alt="Jabi Lake">
                    <div class="card-details">
                        <div>
                            <h3 class="serif" style="font-size: 2.2rem; margin-bottom:15px; color:var(--c-pure-white);">Jabi Lake House</h3>
                            <p class="text-body" style="color:var(--c-gray-200);">Full shading automation & climate zoning.</p>
                        </div>
                        <a href="#" class="btn-glass btn-rect force-light-on-dark">
                            <span>View project</span>
                            <div class="btn-circle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </div>
                        </a>
                    </div>
                </div>
            </section>
            <!-- 3. SERVICES (ROLEX CREAM) -->
            <section id="services" class="services-new-wrapper">
                <div class="services-container">
                    <div style="margin-bottom: 100px; text-align: left; padding-bottom: 40px; border-bottom: 1px solid var(--glass-border);">
                        <span class="micro-label" style="color: var(--light-accent);">Core Capabilities</span>
                        <h2 class="serif" style="margin-bottom: 1rem;">Everything working, as it should.</h2>
                        <p style="color: var(--light-text-muted); max-width: 500px;">We design homes where everything works together quietly, so nothing feels complicated, and nothing asks for attention.</p>
                    </div>
                    <div class="service-row hover-target">
                        <div class="info-col">
                            <div class="num-tag">01</div>
                            <h2>Smart Lighting</h2>
                            <p>Lighting should change without being managed.
    Bright when focus is needed.
    Warm when the day slows down.
    Subtle at night, without reaching for switches or apps.</p>
                            <a href="#service/lighting" class="btn-glass btn-pill btn-dark btn-reverse hover-target">
                                <span>See how it works</span>
                               <div class="btn-circle"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg></div>
                         </a>
                        </div>
                        <div class="visual-col">
                            <div class="img-mask"><img src="thumbnail1.png" loading="lazy" alt="Smart Lighting"></div>
                        </div>
                    </div>
                    <div class="service-row hover-target">
                        <div class="info-col">
                            <div class="num-tag">02</div>
                            <h2>Home Audio & TV</h2>
                            <p>Music when you want it.
    Silence when you don't.
    One tap, and the room changes.</p>
                            <a href="#service/audio" class="btn-glass btn-pill btn-dark hover-target">
                                <span>See how it works</span>
                                <div class="btn-circle"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
                            </a>
                        </div>
                        <div class="visual-col">
                            <div class="img-mask"><img src="thumbnail2.png" loading="lazy" alt="Home Audio"></div>
                        </div>
                    </div>
                    <div class="service-row hover-target">
                        <div class="info-col">
                            <div class="num-tag">03</div>
                            <h2>CCTV & Security</h2>
                            <p>Protection that stays out of sight so that your home stays aware of what matters without false alarms, noise, or attention. We design protection that works quietly in the background, day and night.</p>
                            <a href="#service/security" class="btn-glass btn-pill btn-dark btn-reverse hover-target">
                                <span>See how it works</span>
                                <div class="btn-circle"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg></div>
                            </a>
                        </div>
                        <div class="visual-col">
                            <div class="img-mask"><img src="thumbnail3.jpg" loading="lazy" alt="Smart Security"></div>
                        </div>
                    </div>
                    <div class="service-row hover-target">
                        <div class="info-col">
                            <div class="num-tag">04</div>
                            <h2>Solar & Power</h2>
                            <p>Your home needs to stay powered through daily use, evenings, and interruptions. Without adjustment or concern.
    We will design energy systems that support the way you live, without changing it.</p>
                            <a href="#service/solar" class="btn-glass btn-pill btn-dark hover-target">
                                <span>See how it works</span>
                                <div class="btn-circle"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
                            </a>
                        </div>
                        <div class="visual-col">
                            <div class="img-mask"><img src="thumbnail4.png" loading="lazy" alt="Solar Power"></div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 4. PROCESS -->
            <section class="process-section">
                <span class="micro-label" style="color: var(--light-accent);">The Methodology</span>
                <h2 class="section-title" style="color:var(--light-text); margin-bottom: 80px;">What it looks like, <br><i>from start to finish.</i></h2>
                <div class="pin-wrapper">
                    <div class="pin-image">
                        <img src="process.png" loading="lazy" alt="Technicians">
                    </div>
                    <div class="scroll-content">
                        <div class="process-step active">
                            <div class="step-idx">01</div>
                            <h3 class="serif" style="font-size: 2rem; margin: 15px 0; color: var(--light-text);">Consultation</h3>
                            <p class="text-body" style="color:var(--light-text-muted);">We start by understanding how you live. How you use your home, what matters to you, and what should stay unnoticed.</p>
                        </div>
                        <div class="process-step">
                            <div class="step-idx">02</div>
                            <h3 class="serif" style="font-size: 2rem; margin: 15px 0; color: var(--light-text);">Design & Infrastructure</h3>
                            <p class="text-body" style="color:var(--light-text-muted);">Everything is planned before anything is installed. That's how the technology stays hidden, and the experience stays clean.</p>
                        </div>
                        <div class="process-step">
                            <div class="step-idx">03</div>
                            <h3 class="serif" style="font-size: 2rem; margin: 15px 0; color: var(--light-text);">Installation</h3>
                            <p class="text-body" style="color:var(--light-text-muted);">Work is done quietly, cleanly, and in sequence. Systems are configured, tested, and adjusted until they behave exactly as intended.</p>
                        </div>
                        <div class="process-step">
                            <div class="step-idx">04</div>
                            <h3 class="serif" style="font-size: 2rem; margin: 15px 0; color: var(--light-text);">Ongoing Care</h3>
                            <p class="text-body" style="color:var(--light-text-muted);">Support that continues after installation. Nothing is left to degrade or fall out of sync.</p>
                        </div>
                        <div style="margin-top: 60px; padding-left: 40px;">
                            <a href="https://wa.me/1234567890" class="btn-glass btn-rect hover-target" style="background:var(--light-text); color:var(--light-bg); border:none;">
                                <span>Start Your Project</span>
                                <div class="btn-circle" style="background: rgba(255,255,255,0.15); color: var(--c-pure-white);">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 5. MAINTENANCE -->
            <section class="maint-section">
                <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                    <span class="micro-label">Lifetime Value</span>
                    <h2 class="section-title">We Don't Just Install.<br><i>We Sustain.</i></h2>
                    <p class="text-body" style="margin: 0 auto;">Our relationship doesn't end when project ends. We provide tier-one support.</p>
                </div>
                <div class="maint-grid">
                    <div class="maint-box hover-target">
                        <svg class="maint-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                        <h3 class="serif" style="font-size: 1.5rem; color:var(--text-main);">System Health</h3>
                        <p class="text-body" style="font-size: 0.95rem; margin-top: 15px; color: var(--text-muted);">Issues are identified and handled before they interrupt your day.</p>
                    </div>
                    <div class="maint-box hover-target">
                        <svg class="maint-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/></svg>
                        <h3 class="serif" style="font-size: 1.5rem; color:var(--text-main);">Calibration</h3>
                        <p class="text-body" style="font-size: 0.95rem; margin-top: 15px; color: var(--text-muted);">Seasonal tuning of lighting scenes and audio equalizers.</p>
                    </div>
                    <div class="maint-box hover-target">
                        <svg class="maint-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                        <h3 class="serif" style="font-size: 1.5rem; color:var(--text-main);">Upgrades</h3>
                        <p class="text-body" style="font-size: 0.95rem; margin-top: 15px; color: var(--text-muted);">New capabilities are introduced without disturbing what already works.</p>
                    </div>
                </div>
            </section>
            <!-- 6. FINAL CTA -->
            <section class="final-cta">
                <div class="cta-bg">
                    <img class="parallax-img" src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" loading="lazy" alt="Luxury Interior">
                </div>
                <div class="cta-content">
                    <h2 class="serif" style="font-size: 4.5rem; color: var(--c-pure-white); line-height: 1;">Ready to Automate?</h2>
                    <div style="text-align: center;">
                        <p class="text-body" style="margin-bottom: 40px; margin-top: 20px; color: var(--c-gray-300); display: inline-block;">
                            A short conversation is often enough to see if it's a fit.
                        </p>
                    </div>
                    <!-- FIXED: Button uses 'force-light-on-dark' -->
                    <a href="https://wa.me/1234567890" class="btn-glass btn-pill force-light-on-dark hover-target" style="padding-left:40px;">
                        <span>Chat on WhatsApp</span>
                        <div class="btn-circle">
                            <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px; height:16px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        </div>
                    </a>
                </div>
            </section>
        </div>
    </main>
    <footer>
        <div class="footer-flex">
            <div>
                <h3 style="font-size: 1.8rem; color: var(--c-pure-white); margin-bottom: 25px; font-family: 'Playfair Display', serif;">GIDATECH</h3>
                <p style="line-height: 1.8; max-width: 350px;">Intelligent automation for the modern Nigerian home. We design ecosystems where technology is invisible and living is effortless.</p>
            </div>
            <div>
                <h4 style="color:var(--c-pure-white); margin-bottom: 25px;">Explore</h4>
                <ul>
                    <li style="margin-bottom:15px;"><a href="#" onclick="lenis.scrollTo('.works-section'); return false;" class="hover-target">Projects</a></li>
                    <li style="margin-bottom:15px;"><a href="#services" class="hover-target">Services</a></li>
                    <li style="margin-bottom:15px;"><a href="#" onclick="lenis.scrollTo('.process-section'); return false;" class="hover-target">Process</a></li>
                </ul>
            </div>
            <div>
                <h4 style="color:var(--c-pure-white); margin-bottom: 25px;">Contact</h4>
                <ul>
                    <li style="margin-bottom:15px;"><a href="https://wa.me/1234567890" class="hover-target">WhatsApp Support</a></li>
                    <li style="margin-bottom:15px;">hello@gidatech.com</li>
                    <li style="margin-bottom:15px;">Lagos, Nigeria</li>
                </ul>
            </div>
        </div>
        <div style="margin-top: 80px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; opacity: 0.5;">
            <span>&copy; 2024 Gidatech.</span>
            <span>Privacy Policy</span>
        </div>
    </footer>
    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    
    <!-- SERVICE DATA -->
    <script>
        // ========== SERVICE DATA OBJECT ==========
       const servicesData = {
            lighting: {
                layout: 'lighting',
                category: "Smart Lighting",
                title: "Lighting that understands the moment.",
                subtitle: "Morning focus. Evening calm. Night-time restraint.",
                heroImage: "https://images.unsplash.com/photo-1600607686527-6fb886090705?q=80&w=2000&auto=format&fit=crop",
                gridCards: [
                    { title: "Morning", image: "morning.png", text: "During the day, light should support focus without glare." },
                    { type: "titleBox" },
                    { title: "Afternoon", image: "afternoon.png", text: "Cinema-grade ambiance for gatherings" },
                    { title: "One Touch. Total Shift.", subtitle: "Once you live with lighting like this, everything else feels wrong.", cta: "Start Your Design", type: "descBox" },
                    { title: "Evening", image: "night.png", text: "At night, light should guide, not wake you up." },
                    { title: "Hardware like jewelry.<br>Software like magic.", type: "detailBox", images: ["https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=200&auto=format&fit=crop", "https://images.unsplash.com/photo-1540932296774-324f5f96128b?q=80&w=200&auto=format&fit=crop"] }
                ],
                zigzag: [
                    {
                        title: "Auto day-to-night lighting",
						label: "Smart Timing",
						text: "Your lights shift through the day, cooler in the morning, warmer in the evening. so the space always feels right.",
						image: "zigzag.png",
						reverse: false
					  },
                    {
                        title: "Less switches, cleaner walls",
						label: "Neat Finish",
						text: "We replace clusters of switches with a simple keypad or clean panel, so the wall stays sharp and minimal.",
						image: "zigzag2.jpg",
						reverse: true
					  }
                ],
                products: [
                     { name: "Smart Dimmer", note: "Smooth dimming that feels natural", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" },
					  { name: "Presence Sensor", note: "Turns on when you enter, off when you leave", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" },
					  { name: "Architectural Fixture", note: "Hidden look, clean light", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" },
					  { name: "Color Controller", note: "Warm to cool white control", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" },
					  { name: "Scene Keypad", note: "One-touch scenes for each room", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" },
					  { name: "Smart Relay", note: "Quiet switching, built to last", image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=600&auto=format&fit=crop" }
					],
                usp: {
                    title: "The Only Thing<br>You Touch",
                    text: "Simple buttons for the scenes you want day, evening, night. Clean feel. Clear labels. No confusion.",
					  image: "interface.png"
					},
					ctaMessage: "Hi Gidatech, I'm interested in smart lighting for my home. Can we talk?"
				  },
				  
            audio: {
				layout: 'audio',
				category: "Home Audio & TV",
				title: "Great sound. Clean space.",
				subtitle: "Cinema feel without big speakers everywhere.",
				heroImage: "https://images.unsplash.com/photo-1558002038-1091a1661116?q=80&w=2000&auto=format&fit=crop",
				gallery: [
				  { title: "Private Cinema", image: "theater.jpg", text: "Big screen feel, with hidden speakers" },
				  { title: "Multi-Room Audio", image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?q=80&w=1200&auto=format&fit=crop", text: "Play different rooms, or sync the whole house" },
				  { title: "Outdoor Entertainment", image: "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?q=80&w=1200&auto=format&fit=crop", text: "Weather-ready sound for patios and gardens" },
				  { title: "Architectural Speakers", image: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?q=80&w=1200&auto=format&fit=crop", text: "Built into walls and ceilings, not sitting on the floor" }
				],
				statement: {
				  title: "Sound that fits the room",
				  text: "We hide speakers in-ceiling or in-wall, tune the system for the space, and keep controls simple. You hear it. You dont see it.",
				  image: "feel.png"
				},
				specs: [
				  { number: "32", label: "Zones Supported" },
				  { number: "7.1.4", label: "Atmos Layout" },
				  { number: "24bit", label: "High-Res Audio" }
				],
				ctaMessage: "Hi Gidatech, I want a home audio/TV setup. Can we discuss options?"
			  },

			  security: {
				layout: 'security',
				category: "CCTV & Security",
				title: "Security you can trust.",
				subtitle: "Clear coverage. Clean install. Useful alerts.",
				heroImage: "camera.png",
				quadGrid: [
				  { label: "CAM 01  Entrance", image: "handle.png", title: "Front Door", text: "See who came in and when" },
				  { label: "CAM 02  Garden", image: "controller.png", title: "Outdoor Watch", text: "Motion alerts that make sense" },
				  { label: "CAM 03  Driveway", image: "cctv.png", title: "Driveway", text: "Track vehicles and activity" },
				  { label: "CAM 04  Terrace", image: "https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=800&auto=format&fit=crop", title: "Night View", text: "Clear footage in low light" }
				],
				focus: {
				  title: "Alerts without noise",
				  text: "We set it up to reduce false alarms, so youre not getting pings for every small movement. You get notified when it matters.",
				  image: "footage.png"
				},
				features: [
				  { title: "Smart Alerts", text: "Motion zones + activity rules so alerts stay relevant" },
				  { title: "Secure Access", text: "Door locks and access control that you can manage" },
				  { title: "Remote Monitoring", text: "View live and recorded footage from your phone" },
				  { title: "Neat Installation", text: "Clean camera placement with tidy cable routing" }
				],
				ctaMessage: "Hi Gidatech, I need CCTV/security for my home. Can we talk?"
			  },

            solar: {
				layout: 'solar',
				category: "Solar & Power",
				title: "Power that stays on.",
				subtitle: "Solar + backup built for daily use.",
				heroImage: "https://images.unsplash.com/photo-1509391366360-2e959784a276?q=80&w=2000&auto=format&fit=crop",
				stats: [
				  { value: "40%", label: "Typical Savings" },
				  { value: "13.5", label: "kWh Storage" },
				  { value: "25yr", label: "Panel Warranty" }
				],
				dualSections: [
				  {
					dark: {
					  label: "Generation",
					  title: "Solar that works hard",
					  text: "We size the panels for your real usage and install them cleanly for strong output."
					},
					light: {
					  label: "Storage",
					  title: "Backup you can rely on",
					  text: "Batteries store power for evenings and outages, so the home keeps running."
					}
				  }
				],
				flow: {
				  title: "Smart power flow",
				  text: "The system prioritizes key circuits, manages charging, and balances usage so you get the most from your solar.",
				  nodes: [
					{ icon: "sun", label: "Solar" },
					{ icon: "battery", label: "Battery" },
					{ icon: "home", label: "Home" },
					{ icon: "grid", label: "Grid" }
				  ]
				},
				breakImage: "https://images.unsplash.com/photo-1509391366360-2e959784a276?q=80&w=2000&auto=format&fit=crop",
				ctaMessage: "Hi Gidatech, I want solar/backup power for my home. Can we discuss?"
			  }
			};

        // =====================================================
        // GIDATECH - COMPLETE DOM REPLACEMENT PAGING SYSTEM
// =====================================================
// This approach mirrors AYFA's destructive SPA model:
// - Each page navigation completely replaces the DOM
// - Fresh GSAP/ScrollTrigger instances on each page
// - No state pollution or conflicting animations
// - Smooth, reliable transitions
// =====================================================

// ========== STATE MANAGEMENT ==========
let navigationStack = [{ page: 'home', serviceKey: null }];
let currentPage = 'home';
let currentServiceKey = null;
let isNavigating = false;
let homeHTML = '';
const isMobile = window.innerWidth < 1024;

// ========== SMOOTH SCROLL SETUP ==========
const lenis = new Lenis({
    duration: 1.5,
    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
    smoothWheel: true,
    orientation: 'vertical',
    touchMultiplier: 2
});

function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
}
requestAnimationFrame(raf);

// ========== GSAP SETUP ==========
gsap.registerPlugin(ScrollTrigger);

// ========== PRELOADER ==========
window.addEventListener('load', () => {
    const preloader = document.getElementById('preloader');
    const tl = gsap.timeline();
    tl.to(preloader, {
        yPercent: -100,
        duration: 1.2,
        ease: "power4.inOut",
        delay: 0.5
    })
    .from(".hero-video", {
        scale: 1.1,
        duration: 1.5,
        ease: "power2.out"
    }, "-=0.8")
    .add(() => {
        initializeApp();
    }, "-=0.5");
});

// ========== NAVIGATION SYSTEM ==========
function navigate(page, serviceKey = null) {
    if (isNavigating) return;
    isNavigating = true;

    // Save current scroll position before navigating away
    const currentScrollPos = window.scrollY || 0;

    // Prevent duplicate navigation
    const lastState = navigationStack[navigationStack.length - 1];
    if (lastState.page === page && lastState.serviceKey === serviceKey) {
        isNavigating = false;
        return;
    }

    // Update the previous state with scroll position
    navigationStack[navigationStack.length - 1].scrollPosition = currentScrollPos;

    // Add to navigation stack
    navigationStack.push({ page, serviceKey, scrollPosition: 0 });
    currentPage = page;
    currentServiceKey = serviceKey;

    // Update browser history
    const url = serviceKey ? `#service/${serviceKey}` : `#${page}`;
    history.pushState({ page, serviceKey }, '', url);

    // Render the page
    renderPage(page, serviceKey);

    // Scroll to top for NEW pages only
    window.scrollTo(0, 0);
    lenis.scrollTo(0, { immediate: true });

    setTimeout(() => { isNavigating = false; }, 100);
}

function goBack() {
    if (navigationStack.length <= 1) return;
    isNavigating = true;

    navigationStack.pop();
    const prevState = navigationStack[navigationStack.length - 1];
    currentPage = prevState.page;
    currentServiceKey = prevState.serviceKey;

    const url = prevState.serviceKey ? `#service/${prevState.serviceKey}` : `#${prevState.page}`;
    history.replaceState({ page: prevState.page, serviceKey: prevState.serviceKey }, '', url);

    renderPage(prevState.page, prevState.serviceKey);

    // Restore scroll position immediately (no delay, no animation)
    setTimeout(() => {
        window.scrollTo(0, prevState.scrollPosition);
        lenis.scrollTo(prevState.scrollPosition, { immediate: true });
    }, 10);

    setTimeout(() => { isNavigating = false; }, 100);
}

// ========== PAGE RENDERING ==========
function renderPage(page, serviceKey = null) {
    const mainContent = document.getElementById('main-content');

    if (page === 'home') {
        mainContent.innerHTML = homeHTML;
        renderHomeContent();
    } else if (page === 'service') {
        mainContent.innerHTML = renderServicePage(serviceKey);
        renderServiceContent(serviceKey);
    }
}

// ========== HOME PAGE CONTENT ==========
function renderHomeContent() {
    // Initialize all home page animations
    setTimeout(() => {
        updateHoverTargets();
        initMagneticButtons();
        animateHeadings();
        initHomeAnimations();
        setupMenuToggle();
        setupServiceLinks();
    }, 50);
}

// ========== SERVICE PAGE RENDERING ==========
function renderServicePageHTML(serviceKey) {
    const service = servicesData[serviceKey];
    if (!service) return '';

    let html = '';

    // NAVIGATION BAR
    html += `
        <nav class="service-nav-bar">
            <a href="#" id="close-service-btn" class="btn-close-service hover-target">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                <span>Back</span>
            </a>
            <div class="logo font-light" style="letter-spacing:0.15em; font-size:1rem; color:var(--text-main);">GIDATECH</div>
        </nav>
    `;

    // SERVICE CONTENT BASED ON LAYOUT
    switch(service.layout) {
        case 'audio':
            html += renderAudioLayout(service);
            break;
        case 'security':
            html += renderSecurityLayout(service);
            break;
        case 'solar':
            html += renderSolarLayout(service);
            break;
        case 'lighting':
        default:
            html += renderLightingLayout(service);
            break;
    }

    // DISCOVER SECTION
    html += `
        <section class="discover-section">
            <div class="discover-line"></div>
            <h3 class="discover-title">Explore More</h3>
            <nav class="discover-nav" id="discover-nav"></nav>
        </section>
    `;

    // CTA SECTION
    const ctaMessage = service.ctaMessage || 'Hi Gidatech, I would like to discuss your services.';
    const whatsappLink = `https://wa.me/1234567890?text=${encodeURIComponent(ctaMessage)}`;
    html += `
        <section class="service-cta">
            <div class="service-cta-content">
                <span class="micro-label">Start a Conversation</span>
                <h2 class="service-cta-title">Ready to Begin?</h2>
                <p class="service-cta-text">Discuss your ${service.category.toLowerCase()} project with our specialists.</p>
                <a href="${whatsappLink}" target="_blank" class="btn-glass btn-pill hover-target" style="border-color: rgba(13, 92, 67, 0.25); background: rgba(13, 92, 67, 0.06);">
                    <span>Chat on WhatsApp</span>
                    <div class="btn-circle" style="background: var(--whatsapp-green); color: var(--c-pure-white);">
                        <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px; height:16px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                    </div>
                </a>
            </div>
        </section>
    `;

    return html;
}

function renderServicePage(serviceKey) {
    return renderServicePageHTML(serviceKey);
}

function renderServiceContent(serviceKey) {
    // Populate discover nav
    const container = document.getElementById('discover-nav');
    container.innerHTML = '';
    const keys = Object.keys(servicesData);
    keys.forEach(key => {
        if(key !== serviceKey) {
            const link = document.createElement('a');
            link.href = `#service/${key}`;
            link.className = 'nav-link hover-target';
            link.innerText = servicesData[key].category;
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigate('service', key);
            });
            container.appendChild(link);
        }
    });

    // Setup back button
    const closeBtn = document.getElementById('close-service-btn');
    if (closeBtn) {
        closeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            goBack();
        });
    }

    // Initialize animations
    setTimeout(() => {
        updateHoverTargets();
        initMagneticButtons();
        animateHeadings();
        initServicePageAnimations();
        setupMenuToggle();
    }, 50);
}

// ========== LAYOUT RENDERERS ==========
function renderLightingLayout(service) {
    let html = `
        <section class="service-hero">
            <div class="service-hero-image-wrapper">
                <img class="service-hero-image" src="${service.heroImage}" alt="${service.category}">
            </div>
            <div class="service-hero-overlay"></div>
            <div class="service-hero-content">
                <span class="micro-label">${service.category}</span>
                <h1 class="service-hero-title">${service.title}</h1>
                <p class="service-hero-subtitle">${service.subtitle}</p>
            </div>
        </section>
        
        <section class="service-grid-section">
            <div class="service-grid">`;
    
    service.gridCards.forEach(card => {
        if(card.type === 'titleBox') {
            html += `<div class="grid-card" style="border:none; background:transparent;"></div>`;
        } else if (card.type === 'descBox') {
            html += `<div class="grid-card text-only">
                <h3 class="grid-card-title">${card.title}</h3>
                <p class="desc-subtitle">${card.subtitle}</p>
                <button class="btn-glass btn-rect hover-target"><span>${card.cta}</span><div class="btn-circle"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div></button>
            </div>`;
        } else if (card.type === 'detailBox') {
            html += `<div class="grid-card detail-box">
                <img class="detail-img" src="${card.images[0]}" loading="lazy">
                <img class="detail-img" src="${card.images[1]}" loading="lazy">
                <div class="grid-card-content"><h3 class="grid-card-title" style="font-size:1.5rem;">${card.title}</h3></div>
            </div>`;
        } else {
            html += `<div class="grid-card img-card hover-target">
                <img src="${card.image}" loading="lazy">
                <div class="grid-card-content">
                    <h3 class="grid-card-title">${card.title}</h3>
                    <p class="grid-card-text">${card.text}</p>
                </div>
            </div>`;
        }
    });
    
    html += `</div></section>
        <section class="zigzag-section">`;
    
    service.zigzag.forEach(item => {
        const reverseClass = item.reverse ? 'reverse' : '';
        html += `
        <div class="zz-row ${reverseClass}">
            <div class="zz-content">
                <span class="micro-label">${item.label}</span>
                <h2>${item.title}</h2>
                <p>${item.text}</p>
            </div>
            <div class="zz-image">
                <img src="${item.image}" loading="lazy" alt="${item.title}">
            </div>
        </div>`;
    });
    
    html += `</section>
        <section class="products-section">
            <div class="products-header">
                <span class="micro-label">The Arsenal</span>
                <h2 class="section-title">Curated <i>Hardware</i></h2>
            </div>
            <div class="products-grid">`;
    
    service.products.forEach(p => {
        html += `
        <div class="product-card hover-target">
            <img class="product-image" src="${p.image}" loading="lazy" alt="${p.name}">
            <div class="product-info">
                <h3 class="product-name">${p.name}</h3>
                <p class="product-note">${p.note}</p>
            </div>
        </div>`;
    });
    
    html += `</div></section>
        <section class="usp-section">
            <div class="usp-content">
                <span class="micro-label">The Difference</span>
                <h2>${service.usp.title}</h2>
                <p class="text-body" style="margin: 0 auto;">${service.usp.text}</p>
            </div>
            <div class="usp-showcase">
                <img src="${service.usp.image}" loading="lazy" alt="USP">
            </div>
        </section>`;
    
    return html;
}

function renderAudioLayout(service) {
    let html = `
        <section class="audio-hero">
            <img class="audio-hero-image" src="${service.heroImage}" alt="${service.category}">
            <div class="audio-hero-overlay"></div>
            <div class="waveform-line"></div>
            <div class="audio-hero-content">
                <span class="micro-label">${service.category}</span>
                <h1 class="audio-hero-title">${service.title}</h1>
                <p class="audio-hero-subtitle">${service.subtitle}</p>
            </div>
        </section>
        
        <section class="audio-gallery-section">
            <div class="audio-gallery-header">
                <span class="micro-label">Experiences</span>
                <h2 class="section-title">Sound <i>Spaces</i></h2>
            </div>
            <div class="audio-gallery-scroll">`;
    
    service.gallery.forEach(item => {
        html += `
            <div class="audio-gallery-item hover-target">
                <img src="${item.image}" loading="lazy" alt="${item.title}">
                <div class="audio-gallery-caption">
                    <h3>${item.title}</h3>
                    <p>${item.text}</p>
                </div>
            </div>`;
    });
    
    html += `</div></section>
        
        <section class="audio-statement">
            <div class="audio-statement-text">
                <span class="micro-label">Philosophy</span>
                <h2>${service.statement.title}</h2>
                <p>${service.statement.text}</p>
            </div>
            <div class="audio-statement-visual">
                <img src="${service.statement.image}" loading="lazy" alt="Audio Statement">
            </div>
        </section>
        
        <section class="audio-specs">
            <div style="text-align: center;">
                <span class="micro-label">Technical Excellence</span>
                <h2 class="section-title">By The <i>Numbers</i></h2>
            </div>
            <div class="audio-specs-grid">`;
    
    service.specs.forEach(spec => {
        html += `
                <div class="audio-spec-item">
                    <div class="audio-spec-number">${spec.number}</div>
                    <div class="audio-spec-label">${spec.label}</div>
                </div>`;
    });
    
    html += `</div></section>`;
    
    return html;
}

function renderSecurityLayout(service) {
    let html = `
        <section class="security-hero">
            <img class="security-hero-image" src="${service.heroImage}" alt="${service.category}">
            <div class="security-hero-overlay"></div>
            <div class="security-crosshair"></div>
            <div class="security-hero-content">
                <span class="micro-label">${service.category}</span>
                <h1 class="security-hero-title">${service.title}</h1>
                <p class="security-hero-subtitle">${service.subtitle}</p>
            </div>
        </section>
        
        <section class="security-quad">
            <div class="security-quad-header">
                <span class="micro-label">Live Feed</span>
                <h2 class="section-title">Constant <i>Vigilance</i></h2>
            </div>
            <div class="security-quad-grid">`;
    
    service.quadGrid.forEach(item => {
        html += `
                <div class="security-quad-item hover-target">
                    <img src="${item.image}" loading="lazy" alt="${item.title}">
                    <span class="security-quad-label">${item.label}</span>
                    <span class="security-quad-status"></span>
                    <div class="security-quad-info">
                        <h4>${item.title}</h4>
                        <p>${item.text}</p>
                    </div>
                </div>`;
    });
    
    html += `</div></section>
        
        <section class="security-focus">
            <div class="security-focus-content">
                <span class="micro-label">Philosophy</span>
                <h2>${service.focus.title}</h2>
                <p>${service.focus.text}</p>
            </div>
            <div class="security-focus-image">
                <img src="${service.focus.image}" loading="lazy" alt="Security Focus">
            </div>
        </section>
        
        <section class="security-features">
            <div style="text-align: center;">
                <span class="micro-label">Capabilities</span>
                <h2 class="section-title">System <i>Features</i></h2>
            </div>
            <div class="security-features-list">`;
    
    service.features.forEach((feature, i) => {
        html += `
                <div class="security-feature-item">
                    <span class="security-feature-num">0${i + 1}</span>
                    <div class="security-feature-text">
                        <h4>${feature.title}</h4>
                        <p>${feature.text}</p>
                    </div>
                </div>`;
    });
    
    html += `</div></section>`;
    
    return html;
}

function renderSolarLayout(service) {
    let html = `
        <section class="solar-hero">
            <div class="solar-hero-left">
                <span class="micro-label">${service.category}</span>
                <h1 class="solar-hero-title">${service.title}</h1>
                <p class="solar-hero-subtitle">${service.subtitle}</p>
            </div>
            <div class="solar-hero-right">
                <div class="solar-gradient-divider"></div>
                <img src="${service.heroImage}" alt="${service.category}">
            </div>
        </section>
        
        <section class="solar-stats">`;
    
    service.stats.forEach(stat => {
        html += `
            <div class="solar-stat">
                <div class="solar-stat-value">${stat.value}</div>
                <div class="solar-stat-label">${stat.label}</div>
            </div>`;
    });
    
    html += `</section>`;
    
    service.dualSections.forEach(dual => {
        html += `
        <section class="solar-dual">
            <div class="solar-dual-panel dark">
                <span class="micro-label">${dual.dark.label}</span>
                <h2>${dual.dark.title}</h2>
                <p>${dual.dark.text}</p>
            </div>
            <div class="solar-dual-panel light">
                <span class="micro-label">${dual.light.label}</span>
                <h2>${dual.light.title}</h2>
                <p>${dual.light.text}</p>
            </div>
        </section>`;
    });
    
    html += `
        <section class="solar-flow">
            <div class="solar-flow-header">
                <span class="micro-label">Intelligence</span>
                <h2>${service.flow.title}</h2>
                <p>${service.flow.text}</p>
            </div>
            <div class="solar-flow-diagram">`;
    
    const icons = {
        sun: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>',
        battery: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="18" height="10" rx="2"/><path d="M22 11v2M6 11v2M10 11v2"/></svg>',
        home: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>',
        grid: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>'
    };
    
    service.flow.nodes.forEach((node, i) => {
        html += `
            <div class="solar-flow-node">
                <div class="solar-flow-icon">${icons[node.icon]}</div>
                <span class="solar-flow-label">${node.label}</span>
            </div>`;
        if (i < service.flow.nodes.length - 1) {
            html += `<div class="solar-flow-arrow"></div>`;
        }
    });
    
    html += `</div></section>
        
        <div class="solar-image-break">
            <img src="${service.breakImage}" loading="lazy" alt="Solar Installation">
            <div class="solar-image-break-overlay"></div>
        </div>`;
    
    return html;
}

// ========== ANIMATION UTILITIES ==========
function updateHoverTargets() {
    document.querySelectorAll('.hover-target, a, button').forEach(el => {
        el.removeEventListener('mouseenter', hoverEnter);
        el.removeEventListener('mouseleave', hoverLeave);
        
        el.addEventListener('mouseenter', hoverEnter);
        el.addEventListener('mouseleave', hoverLeave);
    });

    const gallery = document.querySelector('.audio-gallery-scroll');
    if(gallery) {
        gallery.removeEventListener('mouseenter', dragEnter);
        gallery.removeEventListener('mouseleave', dragLeave);
        
        gallery.addEventListener('mouseenter', dragEnter);
        gallery.addEventListener('mouseleave', dragLeave);
    }
}

function hoverEnter() {
    document.body.classList.add('hovering');
}

function hoverLeave() {
    document.body.classList.remove('hovering');
}

function dragEnter() {
    document.body.classList.add('drag-cursor');
}

function dragLeave() {
    document.body.classList.remove('drag-cursor');
}

function initMagneticButtons() {
    const magnets = document.querySelectorAll('.btn-glass');
    magnets.forEach(btn => {
        const circle = btn.querySelector('.btn-circle');
        if(!circle) return;

        btn.removeEventListener('mousemove', null);
        btn.removeEventListener('mouseleave', null);

        btn.addEventListener('mousemove', (e) => {
            const rect = btn.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            
            gsap.to(btn, { x: x * 0.1, y: y * 0.1, duration: 0.3 });
            gsap.to(circle, { x: x * 0.3, y: y * 0.3, duration: 0.3 });
        });

        btn.addEventListener('mouseleave', () => {
            gsap.to(btn, { x: 0, y: 0, duration: 0.5, ease: "elastic.out(1, 0.3)" });
            gsap.to(circle, { x: 0, y: 0, duration: 0.5, ease: "elastic.out(1, 0.3)" });
        });
    });
}

function animateHeadings() {
    const titles = document.querySelectorAll('.section-title, .works-intro h2, .service-hero-title, .audio-hero-title, .security-hero-title');
    
    titles.forEach(title => {
        // Clear any existing wrappers
        const existing = title.querySelector('.char-reveal-wrapper');
        if (existing) return;

        const wrapper = document.createElement('div');
        wrapper.className = 'char-reveal-wrapper';
        
        const originalContent = title.innerHTML;
        title.innerHTML = '';
        
        const span = document.createElement('span');
        span.className = 'char-reveal';
        span.innerHTML = originalContent;
        
        wrapper.appendChild(span);
        title.appendChild(wrapper);

        gsap.to(span, {
            y: "0%",
            duration: 1.2,
            ease: "power4.out",
            scrollTrigger: {
                trigger: title,
                start: "top 85%"
            }
        });
    });
}

// ========== HOME PAGE ANIMATIONS ==========
function initHomeAnimations() {
    // 1. Hero Reveal
    const heroTl = gsap.timeline({ defaults: { ease: "power4.out", duration: 1.5 } });
    const reveals = document.querySelectorAll(".reveal-inner");
    if (reveals.length) {
        heroTl.to(reveals, { y: "0%", stagger: 0.2, delay: 0.2 });
    }

    // 2. Hero Parallax
    const heroVideo = document.querySelector(".hero-video");
    if (heroVideo) {
        gsap.to(heroVideo, {
            yPercent: isMobile ? 5 : 20,
            ease: "none",
            scrollTrigger: {
                trigger: ".hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });
    }

    // 3. Project Cards
    const cards = document.querySelectorAll('.project-card');
    cards.forEach(card => {
        const img = card.querySelector('img');
        gsap.set(img, { scale: 1.2 });
        
        gsap.to(img, {
            scale: 1,
            yPercent: isMobile ? 5 : 10,
            ease: "none",
            scrollTrigger: {
                trigger: card,
                start: "top bottom",
                end: "bottom top",
                scrub: true
            }
        });
    });

    // 4. Service Rows - Scale animation
    const serviceRows = document.querySelectorAll('.service-row');
    serviceRows.forEach(row => {
        const mask = row.querySelector('.img-mask');
        
        ScrollTrigger.create({
            trigger: row,
            start: "top 80%",
            onEnter: () => {
                if (mask) mask.classList.add('revealed');
            }
        });
        
        gsap.to(row, {
            opacity: 1, y: 0, duration: 1, ease: "power3.out",
            scrollTrigger: { trigger: row, start: "top 85%" }
        });
    });

    // 5. Process Section Scroll Effect
    const pinImg = document.querySelector('.pin-image img');
    if(pinImg && !isMobile) {
        gsap.set(pinImg, { scale: 1.1 });
        gsap.to(pinImg, {
            scale: 1, yPercent: 10, ease: "none",
            scrollTrigger: {
                trigger: ".process-section", start: "top bottom", end: "bottom top", scrub: true
            }
        });
    }

    // 6. Process Step Active State
    const processSteps = document.querySelectorAll('.process-step');
    if (processSteps.length > 0) {
        processSteps.forEach((step) => {
            ScrollTrigger.create({
                trigger: step, 
                start: "top 60%", 
                end: "bottom 40%",
                onEnter: () => { 
                    processSteps.forEach(s => s.classList.remove('active')); 
                    step.classList.add('active'); 
                },
                onEnterBack: () => { 
                    processSteps.forEach(s => s.classList.remove('active')); 
                    step.classList.add('active'); 
                }
            });
        });
    }

    // 7. Final CTA Parallax
    const ctaBg = document.querySelector(".cta-bg img");
    if (ctaBg) {
        gsap.to(ctaBg, {
            yPercent: 15, scale: 1.1, ease: "none",
            scrollTrigger: { trigger: ".final-cta", start: "top bottom", end: "bottom top", scrub: true }
        });
    }
}

// ========== SERVICE PAGE ANIMATIONS ==========
function initServicePageAnimations() {
    // 1. Service Hero Parallax
    const heroImage = document.querySelector(".service-hero-image");
    if (heroImage) {
        gsap.to(heroImage, {
            yPercent: isMobile ? 5 : 15,
            ease: "none",
            scrollTrigger: { trigger: ".service-hero", start: "top top", end: "bottom top", scrub: true }
        });
    }

    // 2. Grid Card Reveals (Clip Path + Scale)
    const cards = document.querySelectorAll('.grid-card.img-card');
    cards.forEach(card => {
        gsap.set(card, { clipPath: "inset(100% 0% 0% 0%)" });
        const img = card.querySelector('img');
        if (img) gsap.set(img, { scale: 1.2 });

        let tl = gsap.timeline({
            scrollTrigger: { trigger: card, start: "top 85%", end: "bottom 85%" }
        });
        tl.to(card, { clipPath: "inset(0% 0% 0% 0%)", duration: 1.2, ease: "power3.inOut" })
          .to(card.querySelector('img'), { scale: 1, duration: 1.5, ease: "power3.out" }, "-=1.0");
    });

    // 3. Zigzag Image Reveals
    const zzImages = document.querySelectorAll('.zz-image');
    zzImages.forEach(wrapper => {
        const img = wrapper.querySelector('img');
        gsap.set(img, { yPercent: -10, scale: 1.1 });
        gsap.to(img, {
            yPercent: 10, ease: "none",
            scrollTrigger: { trigger: wrapper, start: "top bottom", end: "bottom top", scrub: true }
        });
    });

    // 4. Security Quad Reveal
    const quads = document.querySelectorAll('.security-quad-item');
    if(quads.length) {
        gsap.from(quads, {
            y: 50, opacity: 0, stagger: 0.1, duration: 1, ease: "power3.out",
            scrollTrigger: { trigger: ".security-quad-grid", start: "top 80%" }
        });
    }

    // 5. Solar Split Parallax
    const solarRight = document.querySelector('.solar-hero-right img');
    if(solarRight) {
        gsap.to(solarRight, {
            yPercent: 20, ease: "none",
            scrollTrigger: { trigger: ".solar-hero", start: "top top", end: "bottom top", scrub: true }
        });
    }

    // 6. Audio Statement Parallax
    const audioStatementImg = document.querySelector('.audio-statement-visual img');
    if (audioStatementImg) {
        gsap.to(audioStatementImg, {
            yPercent: 10, ease: "none",
            scrollTrigger: { trigger: ".audio-statement", start: "top bottom", end: "bottom top", scrub: true }
        });
    }
}

// ========== MENU TOGGLE (SLIDER FROM RIGHT) ==========
function setupMenuToggle() {
    const menuToggle = document.getElementById('menuToggle');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuCloseBtn = document.getElementById('menuCloseBtn');
    const menuBackdrop = document.getElementById('menuBackdrop');

    if (!menuToggle || !menuOverlay) return;

    let isMenuOpen = false;

    function openMenu() {
        menuOverlay.classList.add('open');
        if (menuBackdrop) menuBackdrop.classList.add('open');
        lenis.stop();
        isMenuOpen = true;
    }

    function closeMenu() {
        menuOverlay.classList.remove('open');
        if (menuBackdrop) menuBackdrop.classList.remove('open');
        lenis.start();
        isMenuOpen = false;
    }

    // Clear any existing listeners by cloning
    const newMenuToggle = menuToggle.cloneNode(true);
    menuToggle.parentNode.replaceChild(newMenuToggle, menuToggle);
    
    document.getElementById('menuToggle').addEventListener('click', () => {
        if (!isMenuOpen) {
            openMenu();
        } else {
            closeMenu();
        }
    });

    // Close button inside slider
    if (menuCloseBtn) {
        const newCloseBtn = menuCloseBtn.cloneNode(true);
        menuCloseBtn.parentNode.replaceChild(newCloseBtn, menuCloseBtn);
        document.getElementById('menuCloseBtn').addEventListener('click', () => {
            closeMenu();
        });
    }

    // Click backdrop to close
    if (menuBackdrop) {
        const newBackdrop = menuBackdrop.cloneNode(true);
        menuBackdrop.parentNode.replaceChild(newBackdrop, menuBackdrop);
        document.getElementById('menuBackdrop').addEventListener('click', () => {
            closeMenu();
        });
    }

    // Close menu when clicking menu links
    document.querySelectorAll('.menu-link').forEach(link => {
        link.addEventListener('click', () => {
            closeMenu();
        });
    });
    
    // Close menu when clicking CTA inside menu
    const menuCta = menuOverlay.querySelector('.menu-cta-wrapper a');
    if (menuCta) {
        menuCta.addEventListener('click', () => {
            closeMenu();
        });
    }
}

// ========== SERVICE LINKS SETUP (HOME PAGE) ==========
function setupServiceLinks() {
    document.querySelectorAll('a[href^="#service/"]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const serviceKey = link.getAttribute('href').replace('#service/', '');
            navigate('service', serviceKey);
        });
    });
}

// ========== BROWSER NAVIGATION ==========
window.addEventListener('popstate', (e) => {
    if (e.state) {
        navigate(e.state.page, e.state.serviceKey);
    } else {
        navigate('home');
    }
});

// ========== CURSOR SYSTEM ==========
const cursorDot = document.querySelector('.cursor-dot');
const cursorCircle = document.querySelector('.cursor-circle');
let cursorX = 0, cursorY = 0;

document.addEventListener('mousemove', (e) => {
    cursorX = e.clientX;
    cursorY = e.clientY;
    gsap.to(cursorDot, { x: cursorX, y: cursorY, duration: 0.1 });
    gsap.to(cursorCircle, { x: cursorX, y: cursorY, duration: 0.4 });
});

// ========== HASH NAVIGATION ==========
function handleHashNavigation() {
    const hash = window.location.hash;
    if (hash.startsWith('#service/')) {
        const serviceKey = hash.replace('#service/', '');
        if (servicesData[serviceKey]) {
            navigate('service', serviceKey);
        } else {
            navigate('home');
        }
    } else if (hash === '#services') {
        navigate('home');
        setTimeout(() => lenis.scrollTo('#services'), 200);
    } else {
        navigate('home');
    }
}

window.addEventListener('hashchange', handleHashNavigation);

// ========== APP INITIALIZATION ==========
function initializeApp() {
    // Save original home HTML
    homeHTML = document.getElementById('main-content').innerHTML;

    // Handle initial page from URL
    const hash = window.location.hash;
    if (hash.startsWith('#service/')) {
        const serviceKey = hash.replace('#service/', '');
        if (servicesData[serviceKey]) {
            renderPage('service', serviceKey);
            currentPage = 'service';
            currentServiceKey = serviceKey;
            setTimeout(() => {
                ScrollTrigger.refresh();
                renderServiceContent(serviceKey);
            }, 100);
        } else {
            renderHomeContent();
        }
    } else {
        renderHomeContent();
    }

    // Setup history state
    history.replaceState({ page: 'home', serviceKey: null }, '', '#home');
}

document.addEventListener('DOMContentLoaded', () => {
    // Will be called after preloader animation
});
    </script>
</body>
</html>